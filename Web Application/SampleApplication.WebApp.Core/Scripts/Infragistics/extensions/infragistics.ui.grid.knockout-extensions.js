ko.bindingHandlers.igGrid={init:function(e,l,a,m,c){var f=$(e),h=f.data("igGrid"),b,k;if(f.attr("data-create")!=="false"){b=ko.utils.unwrapObservable(l());k={};k.dataSource=new $.ig.KnockoutDataSource({dataSource:b.dataSource});for(var j in b){if(b.hasOwnProperty(j)&&j!=="dataSource"){k[j]=b[j]}}}else{b=k=h.options}var i=function(q,n){var r=n.owner.options,p,s;p=ko.isObservable(b.dataSource)?b.dataSource():b.dataSource;if(p instanceof $.ig.DataSource){s=p.settings;p=p.kods?ko.isObservable(p.kods)?p.kods():p.kods:p.data();if(s.responseDataKey){if(ko.isObservable(p[s.responseDataKey])){p=p[s.responseDataKey]()}else{p=p[s.responseDataKey]}}}f.attr("data-bound",true);if(!r.rowVirtualization&&!r.virtualization){n.owner._startRowIndex=0}n.owner.element.children("tbody").children("tr").map(function(t){$(this).children().map(function(u){dataVal=p[t+n.owner._startRowIndex][r.columns[u].key];if(ko.isObservable(dataVal)){ko.applyBindingsToNode(this,{igCell:{value:r.columns[u].key}},dataVal)}})});f.removeAttr("data-bound")};f.bind("iggriddatarendered",i).bind("iggridvirtualrecordsrender",i);if(f.attr("data-create")!=="false"){f.igGrid(k)}else{g=f.data("igGrid");o=g.options;d=g.dataSource.kods;if(o.responseDataKey&&d[o.responseDataKey]){d=d[o.responseDataKey]}d=ko.isObservable(d)?d():d;f.attr("data-bound",true);f.find("tbody").children("tr").map(function(n){$(this).children().map(function(p){dataVal=d[n][o.columns[p].key];if(ko.isObservable(dataVal)){ko.applyBindingsToNode(this,{igCell:{value:o.columns[p].key}},dataVal)}})});f.removeAttr("data-bound")}return{controlsDescendantBindings:true}},update:function(c,p,a,q,b){var e=$(c).data("igGrid"),h,k,l=$(c).data("igGridUpdating"),f,m,n;h=p().dataSource;oldds=e.dataSource.data();if(l===null||l===undefined){throw new Error("two-way adding and deleting of rows with KnockoutJS requires the Updating feature to be defined")}if(typeof(h)==="function"){if(h().length!==oldds.length){e.dataSource._koUpdate=true}if(h().length<oldds.length){m=h()[h().length-1][e.options.primaryKey];m=ko.isObservable(m)?m():m;if(m===oldds[oldds.length-1][e.options.primaryKey]){for(f=0;f<oldds.length;f++){n=h()[f][e.options.primaryKey];n=ko.isObservable(n)?n():n;if(olds[f][e.options.primaryKey]!==n){l.deleteRow(oldds[f][e.options.primaryKey]);break}}}else{l.deleteRow(oldds[oldds.length-1][e.options.primaryKey])}}else{if(h().length>oldds.length){m=h()[h().length-1][e.options.primaryKey];m=ko.isObservable(m)?m():m;if(m===oldds[oldds.length-1][e.options.primaryKey]){for(f=0;f<oldds.length;f++){n=h()[f][e.options.primaryKey];n=ko.isObservable(n)?n():n;if(olds[f][e.options.primaryKey]!==n){l.addRow(ko.mapping.toJS(h()[f]));break}}}else{var j=ko.mapping.toJS(h()[h().length-1]);l.addRow(j)}}}}}};ko.visitPropertiesOrArrayEntries=function(c,e){if(c instanceof Array){for(var a=0;a<c.length;a++){e(a)}}else{for(var b in c){e(b)}}};ko.bindingHandlers.igHierarchicalGrid={init:function(h,q,a,r,c){var i=$(h),b,k,f,p,l,m=0,n,e;b=ko.utils.unwrapObservable(q());k={};f=ko.isObservable(b.dataSource)?b.dataSource():b.dataSource;if(f instanceof $.ig.DataSource){f=f.data()}k.dataSource=new $.ig.KnockoutDataSource({dataSource:b.dataSource});for(var j in b){if(b.hasOwnProperty(j)&&j!=="dataSource"){k[j]=b[j]}}i.igHierarchicalGrid(k);i.data("observableDataSource",k.dataSource);e=function(t,s){var u,w=s.options,x=0,v;u=s.owner.element.data("observableDataSource");v=u.dataAt(s.id,s.path);w.dataSource=new $.ig.KnockoutDataSource({primaryKey:w.primaryKey,dataSource:w.dataSource,observableDataSource:v,responseDataKey:w.responseDataKey});s.element.igGrid(w);w=s.element.data("igGrid").options;s.element.attr("data-create",false);ko.applyBindingsToNode(s.element,{igGrid:{}},v)};i.delegate("table","igchildgridcreating",e);l=i.data("igGrid").options;i.attr("data-bound",true);i.children("tbody").children("tr").map(function(s){$(this).children().map(function(t){n=$(this);if(!n.attr("data-skip")&&!n.hasClass("ui-iggrid-expandcolumn")){ko.applyBindingsToNode(this,{igCell:{value:l.columns[t-m].key}},f[s][l.columns[t-m].key])}else{m++}});m=0});i.removeAttr("data-bound");return{controlsDescendantBindings:true}},update:function(c,e,a,f,b){}};ko.bindingHandlers.igCell={init:function(c,e,a,f,b){},update:function(e,l,a,m){var b=$(e),f=b.closest(".ui-iggrid-table");if(f.attr("data-bound")!=="true"){var i=f.data("igGrid")._renderCell(m,l().value);b.text(i);var k=b.closest("tr");var j,h;var c=f.data("igGrid").columnByKey(f.data("igGrid").options.primaryKey);if(k.attr("data-id")!==null&&k.attr("data-id")!==undefined){if(c.dataType==="number"||typeof(c.dataType)==="undefined"){h=parseInt(k.attr("data-id"),10)}else{h=k.attr("data-id")}j=f.data("igGrid").dataSource.findRecordByKey(h);j[l().value]=m}else{throw new Error("Updating the data source requires a primary key to be defined")}}}};