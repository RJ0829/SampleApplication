/*
* Infragistics.Web.ClientUI Combo localization resources 12.1.20121.1010
*
* Copyright (c) 2011-2012 Infragistics Inc.
*
* http://www.infragistics.com/
*
*/
$.ig=$.ig||{};if(!$.ig.Combo){$.ig.Combo={locale:{noMatchFoundText:"No Results",dropDownButtonTitle:"Show drop-down",clearButtonTitle:"Clear value"}};
/*
* Infragistics.Web.ClientUI Combo 12.1.20121.1010
*
* Copyright (c) 2011-2012 Infragistics Inc.
*
* http://www.infragistics.com/
*
* Depends on:
* jquery-1.4.4.js
* jquery.ui.core.js
* jquery.ui.widget.js
* ig.util.js
* ig.dataSource.js
*
* Example to use:
*	<script type="text/javascript">
*	$(function () {
*		$('#combo1').igCombo();
*	});
*	</script>
*	<input id="combo1" />
*/
}(function(a){var b=function(k,j){return k===null||k===undefined||(j&&typeof k==="number"&&isNaN(k))},i=function(j){if(!j){return 0}if(typeof j==="number"){return j}j=j.toString();j=j.match(/[e%mitc]/i)?0:parseFloat(j);return isNaN(j)?0:Math.floor(j+0.5)},g=function(k,j){return i(k.css(j))},e=function(j){return j.attr("tabIndex",-1).css("outline",0).attr("unselectable","on")},h=function(j){try{j.preventDefault();j.stopPropagation()}catch(k){}},c=function(j,k){return j===k||(j&&k&&j.getTime&&k.getTime&&j.getTime()===k.getTime())},f=function(){return new Date().getTime()},d=100;a.widget("ui.igCombo",{options:{height:null,width:null,tabIndex:null,animationShowDuration:100,animationHideDuration:50,enableDisplayBlock:false,mode:"editable",dropDownOnFocus:false,renderMatchItems:"multi",caseSensitive:false,filteringCondition:"contains",filteringType:null,filterExprUrlKey:null,autoComplete:false,format:true,selectedItems:[{index:-1,value:null,text:null}],multiSelection:null,enableActiveItem:true,allowCustomValue:false,selectItemBySpaceKey:false,itemSeparator:", ",dropDownWidth:0,dropDownMaxHeight:300,dropDownMinHeight:0,dropDownAsChild:false,virtualization:false,showDropDownButton:true,enableClearButton:true,noMatchFoundText:null,dropDownButtonTitle:null,clearButtonTitle:null,text:null,itemTemplate:null,headerTemplate:null,footerTemplate:null,nullText:null,dataSource:null,dataSourceType:null,dataSourceUrl:null,responseTotalRecCountKey:null,responseDataKey:null,validatorOptions:null,inputName:null,loadOnDemandSettings:{enabled:false,pageSize:null},dataBindOnOpen:false,closeDropDownOnSelect:true,closeDropDownOnBlur:true,valueKeyType:null,textKeyType:null,valueKey:null,textKey:null},events:{dropDownOpening:null,dropDownOpened:null,dropDownClosing:null,dropDownClosed:null,dataBinding:null,dataBound:null,textChanged:null,selectionChanging:null,selectionChanged:null,activeItemChanging:null,activeItemChanged:null,noMatchFound:null,filtering:null,filtered:null},css:{combo:"ui-igcombo ui-state-default ui-widget ui-corner-all",field:"ui-igcombo-field ui-corner-all",fieldHolder:"ui-igcombo-fieldholder",fieldHolderRTL:"ui-igcombo-fieldholder-rtl ui-corner-right",fieldHolderLTR:"ui-igcombo-fieldholder-ltr ui-corner-left",hover:"ui-igcombo-hover ui-state-hover",focus:"ui-igcombo-focus ui-state-focus",fieldHover:"ui-igcombo-field-hover",fieldFocus:"ui-igcombo-field-focus",disabled:"ui-igcombo-disabled ui-state-disabled",waitFiltering:"ui-igcombo-waitfiltering",nullText:"ui-igcombo-nulltext",button:"ui-igcombo-button ui-state-default",buttonRTL:"ui-igcombo-button-rtl ui-corner-left",buttonLTR:"ui-igcombo-button-ltr ui-corner-right",buttonFocus:"ui-igcombo-button-focus",buttonHover:"ui-igcombo-button-hover ui-state-hover",buttonPressed:"ui-igcombo-button-pressed ui-state-highlight",buttonIcon:"ui-igcombo-buttonicon ui-icon-triangle-1-s ui-icon",clear:"ui-igcombo-clear",clearHover:"ui-igcombo-clear-hover ui-state-hover",clearPressed:"ui-igcombo-clear-pressed ui-state-highlight",clearFocus:"ui-igcombo-clear-focus",clearIcon:"ui-igcombo-clearicon ui-icon-circle-close ui-icon",checkbox:"ui-state-default ui-corner-all ui-igcombo-checkbox ui-igcheckbox-small",checkboxHover:"ui-state-hover ui-igcombo-checkbox-hover",checkboxIconHover:"ui-state-hover ui-igcombo-checkboxicon-hover",checkboxOff:"ui-icon ui-igcombo-checkbox-off ui-igcheckbox-small-off",checkboxOn:"ui-icon ui-icon-check ui-igcombo-checkbox-on ui-igcheckbox-small-on",list:"ui-igcombo-list ui-widget ui-widget-content ui-corner-all",listItemHolder:"ui-igcombo-listitemholder",listItem:"ui-igcombo-listitem ui-state-default",listItemHover:"ui-igcombo-listitem-hover ui-state-hover",listItemActive:"ui-igcombo-listitem-active ui-state-active",listItemSelected:"ui-igcombo-listitem-selected ui-state-highlight",listItemMatch:"ui-igcombo-listitem-match",listItemTextWithCheckbox:"ui-igcombo-listitemtextwithcheckbox",noTopCorners:"ui-igcombo-no-top-corners",noBottomCorners:"ui-igcombo-no-bottom-corners"},RECORDS_VIEW:"{0}",RECORDS_DATA:"{1}",RECORDS_SERVER:"{2}",RECORDS_SERVER_TOTAL:"{3}",_create:function(){var w,n,t,s,u,k,j,B,E,q,D,v=this,x=v.options,l=v.css,m=v.element,C=x.selectedItems,r="float",p=m,A=m.css("direction")==="rtl",z={display:0,visibility:0,position:0},y={title:0};v._data=[];v._rtl=A;v._lastScroll=v._virtualTop=v._topID=0;v._changeID=v._activeID=v._scrollTo=-1;s=v._noMouse()?null:x.renderMatchItems;v._matchFlag=(s&&s!=="none")?s:null;if(C&&C.length===1&&C[0].index===-1&&C[0].value===null){x.selectedItems=C=null}w=m[0].nodeName;if(w){w=w.toUpperCase()}t=w==="INPUT";v._SELECT=B=w==="SELECT";if(!x.inputName){v._oldCss=z;v._oldAttr=y}if(t){y.value=y.disabled=y.readOnly=y.alt=y.tabIndex=z.textAlign=z.position=z.overflow=z[r]=0}else{if(B){if(!x.dataSource){B=m[0].options;u=B.length;if(!C||C.length===0){k=C=x.selectedItems=[]}x.dataSource=[];x.valueKey="value";x.textKey="text";for(s=0;s<u;s+=1){E=B[s].text||B[s].innerHTML;x.dataSource[s]={value:B[s].value||E,text:E};if(k&&(s===m[0].selectedIndex||B[s].selected)){C.push({index:s})}}}}else{if(w!=="DIV"&&w!=="SPAN"){throw new Error(w+" is not supported as base element")}y.innerHTML=0}}for(s in z){if(z.hasOwnProperty(s)){z[s]=m.css(s)}}for(s in y){if(y.hasOwnProperty(s)){y[s]=m[0][s]}}z.width=m[0].style.width;x.width=x.width||z.width;z.height=m[0].style.height;x.height=x.height||z.height;if(C&&C.length>0){E=""}else{if(b(E=x.text)){if(!m[0].multiple){E=x.inputName?"":(t?y.value:(B?m.val():y.innerHTML))}E=E?E.replace(/[\x09\x0a]/g,""):"";s=E.length;while((s-=1)>=0){if(E.charCodeAt(s)===32){E=E.substring(0,s)}else{break}}}}if(t||B){v._swap=true;m=a("<span />").css({position:p.css("position"),left:p.css("left"),top:p.css("top")}).insertBefore(p);if(A){m.css("direction","rtl")}if(B){p.css("display","none");p=a("<input />")}}else{p=a("<input />");if(!x.inputName){m.html("")}}v._oldTxt="";v.mainElem=m;s=m.css("position");v._static=!s||s==="static";m.css("overflow","hidden");v._fieldHolder=q=a("<span />").addClass(l.fieldHolder).addClass(A?l.fieldHolderRTL:l.fieldHolderLTR).css("float",A?"right":"left").appendTo(m);v.fieldElem=p.appendTo(q).addClass(l.field).css("float",A?"right":"left").bind(v._evts={keydown:function(o){v._onKey(o,0)},keypress:function(o){v._onKey(o,1)},keyup:function(o){v._onKey(o,2)},focus:function(o){v._onEvt(this,8,o)},blur:function(o){v._onEvt(this,9,o)},paste:function(o){v._onChange(o)},beforecut:function(o){v._onChange(o)},cut:function(o){v._onChange(o)},drop:function(o){v._onChange(o)}});if(!b(s=x.tabIndex)){p.attr("tabIndex",s)}p[0].disabled=x.disabled;p[0].readOnly=(this._mode(x)>0)?"readonly":"";m.addClass(l.combo).css("display","inline-block").bind(v._elemEvts={mouseover:function(o){v._onEvt(null,6,o)},mouseleave:function(o){v._onEvt(null,7,o)}});v._mEvts=n={mousedown:function(o){v._onEvt(this,3,o)},mouseup:function(o){v._onEvt(this,4,o)},mouseover:function(o){v._onEvt(this,6,o)},mouseleave:function(o){v._onEvt(this,7,o)}};v._tEvts=D={touchstart:function(o){h(o)},touchmove:function(o){h(o)},touchend:function(o){h(o);a(this).trigger("mousedown").trigger("mouseup")}};v.buttonElem=j=e(a("<span />").addClass(l.button).addClass(A?l.buttonRTL:l.buttonLTR).css("float",A?"left":"right").attr("data-id",1).appendTo(m).bind(n).bind(D));e(a("<span />").addClass(l.buttonIcon).appendTo(j).bind(D));v.clearElem=k=e(a("<span />").addClass(l.clear).css("float",A?"left":"right").attr("data-id",2).appendTo(q).bind(n).bind(D));e(a("<span />").addClass(l.clearIcon).appendTo(k).bind(D));v._titles();v.validator();v._clearOn=false;v._doSize();if(!x.dataBindOnOpen){v.dataBind()}if(E){v.text(E)}v._canFire=true},dropDownVisible:function(k,j){if(!arguments.length){return !!this._ddOn}this._canFire=j;this._doDrop(k?2:0);this._canFire=true;return this},remove:function(){var k,l=this._validator,j=this.mainElem;if(!j||!j[0]){return}if(l){l.hide()}if(this._fcs){this._onEvt(null,9)}this.fieldElem.removeClass(this.css.fieldHover);j.removeClass(this.css.hover);k=j[0].parentNode;if(k&&k.tagName){this._doDrop(0);this._fcs=0;k.removeChild(j[0])}return this},validator:function(j){var l=this.options.validatorOptions,k=this.fieldElem,m=this._validator;if(m&&(j||!l)){m.destroy();delete this._validator}else{if(!m&&!j&&l&&k.igValidator){l.combo=l.element=this.mainElem;this._validator=k.igValidator(l).data("igValidator")}}return this._validator},validate:function(){return this._validator?this._validator.validate():null},setFocus:function(j){var l=this;if(l.fieldElem&&!l._fcs){if(j===-1){try{l.fieldElem[0].focus()}catch(k){}}else{setTimeout(function(){l.setFocus(-1)},j||0)}}return this},hasFocus:function(){return this._fcs===1},isSelected:function(j){var l=this.options.selectedItems,k=l?l.length:0;while((k-=1)>=0){if(l[k].index===j){return true}}return false},selectedIndex:function(l,j){if(l===undefined){var k,n=this.options.selectedItems,m=n?n.length:0;l=-1;while((m-=1)>=0){k=n[m].index;l=(l<0)?k:Math.min(k,l)}return l}this._canFire=j;this._select(l);this._updateFromList(null,1);this._canFire=true;return this},activeIndex:function(k,j){if(k===undefined){return this._activeID}this._canFire=j;this._activate(k);this._canFire=true;return this},value:function(k,j){if(this._noMouse()){return this.text(k,j)}if(k===undefined){k=this.options.selectedItems;return(k&&k[0])?k[0].value:null}this._canFire=j;this._select(null,k);this._updateFromList(null,1);this._canFire=true;return this},text:function(k,j){if(k===undefined){k=this.fieldElem.val();return(this._nullT&&(!k||k===this.options.nullText))?"":k}this._canFire=j;this._select(null,k,2);this._updateFromList(null,1);if(this._custom()){this._onChange(null,null,k)}this._canFire=true;return this},values:function(m){var k=this.options,l=k.selectedItems,j=l?l.length:0;if(m===undefined){m=[];while((j-=1)>=0){m[j]=l[j].value}return m}j=m?m.length:0;l=[];while((j-=1)>=0){l[j]={value:m[j]}}k.selectedItems=l;this._initSel(k);return this},itemByIndex:function(j){return j<0?null:{element:this._findItem(j),index:j,value:this._item(j),text:this._item(j,2)}},itemByValue:function(k){var j=-1;while(++j<this._count){if(c(k,this._item(j))){return this.itemByIndex(j)}}},getFooter:function(){return this.listElem?this.listElem.find("[data-footer]"):null},getRecordsCount:function(l){var j=this._count,k=this._dataSource;if(l===this.RECORDS_VIEW||l===0){return j}if(k){j=k._data.length;if(l===this.RECORDS_DATA||l===1){return j}j=Math.max(k.totalRecordsCount(),j);if(l===this.RECORDS_SERVER||l===2){return j}if(l===this.RECORDS_SERVER_TOTAL||l===3){j=Math.max(Math.max(j,this._totalAll||0),parseInt(this.options._totalAll||0,10))}}return j},_noMouse:function(){var k=this.options,j=k.dataSource;k=k.itemTemplate;return k&&j&&j.length===1&&k.indexOf("{")<0&&k.indexOf("}")<0},_custom:function(){return this.options.allowCustomValue||this._noMouse()},_multi:function(j){j=j.multiSelection;return j&&j!=="off"},_checkBox:function(j){j=j.multiSelection;return(j===2)||(j&&j.toLowerCase&&j.toLowerCase()==="onwithcheckboxes")},_mode:function(j){j=j.mode;return(j===1||j==="dropdown")?1:((j===2||j==="readonlylist")?2:((j===3||j==="readonly")?3:0))},_fixSelElem:function(k,n){var j=this.css,l=j.listItemSelected,m=j.checkboxOff;if(n){k.addClass(l)}else{k.removeClass(l)}if(k.attr("data-check")){k[0]._check=n;l=j.checkboxOn;k.find("[data-icon]").removeClass(n?m:l).addClass(n?l:m)}},_copyA:function(j){var l=j?j.length:0,k=l?[]:null;while((l-=1)>=0){k[l]=j[l]}return k},_clearSel:function(){var j=this._selElems,k=j?j.length:0;while((k-=1)>=0){this._fixSelElem(j[k])}this._selElems=null},_selChanged:function(j){if(this._selArg){this._fire("selectionChanged",j,this._selArg);if(this._SELECT){var k=this.element[0],m=k.options,n=this.options.selectedItems,l=n?n[0]:null;l=l?l.index:-1;k.selectedIndex=l;if(m&&l>=0&&l<m.length){m[l].selected=true}if(k.onchange){k.onchange()}}delete this._selArg}},_selChange:function(q,k,j,o){var l,p=this.options.selectedItems,m=p?p.length:0,n=q?q.length:0;if(!n){q=null}if(m===n){while(m-->0){for(l=0;l<n;l+=1){if(o){if(p[m].value===q[l].value&&p[m].text===q[l].text){break}}else{if(p[m].index===q[l].index){break}}}if(l===n){break}}}p=(m>=0&&this._hasData&&!this._waitFilter)?{owner:this,oldItems:p,items:q}:null;delete this._selArg;if(p&&!this._fire("selectionChanging",k,p)&&!o){return}this._selTime=(k&&this.options.focusOnSelect===false)?f():0;this._selArg=p;if(j||!n){this._clearSel()}this.options.selectedItems=q;return 1},_addSel:function(k,j){if(k>=0&&!this.isSelected(k)){var l=this._copyA(this.options.selectedItems);k=this._createSelItem(k);if(!l){l=[k]}else{l.push(k)}if(this._selChange(l,j)){this._selChanged(j)}}return this.options.selectedItems},_sepEnd:function(l){var k=this._sep(),j=l.length;return j>1&&l.lastIndexOf(k)===j-k.length},_select:function(t,E,r,z,q){var F,v,D,u,m,p,B=null,A=-1,l=-1,s=-1,y=this.options,x=1,n=this._count,k=z?(y.allowCustomValue?2:1):null,C=false,w=!y.caseSensitive&&typeof E==="string";if(q&&z&&!this._ddOn&&q.type!=="mouseup"){this._doDrop(1,q)}if(this._noMouse()){return}if(k){this._changeID=-1}if(!b(E)&&E!==""){if(r===2){E=E.toString()}F=(typeof E==="string")?this._texts(E):(E.length?E:[E]);if((v=F.length)>0){u=F[v-1];if(!u&&(r===2||b(u))){if(k===1){C=this._sepEnd(E)}F.splice(v-=1,1)}}if(v===0){this._selChange(B,q,1,1);this._selChanged(q);return}while((s+=1)<v){F[s]={val:F[s],id:-1,done:null}}if(!this._isStrCond(m=this._cond(y))){m="startsWith"}p=this._dataSource;t=-1;while((t+=1)<n&&x){if(b(D=this._item(t,r))){continue}if(w){D=D.toString().toLowerCase()}x=null;for(s=0;s<v;s+=1){if(!F[s].done){x=1;E=F[s].val;if(E===D||(z&&p._findMatch(D,E,"string",false,m))){u=s;while((u-=1)>=0){if(F[u].id===t){break}}if(k&&u>=0){continue}if(k&&s+1===v&&!C){if(l<0){this._changeID=A=l=t;if(k===1&&!y.enableActiveItem){F[s].id=t}}}else{if(F[s].id<0){F[s].id=t}}if(k!==1&&(E===D||!z)){F[s].id=t;F[s].done=1}}}}}B=[];for(s=0;s<v;s+=1){if((t=F[s].id)>=0&&k!==2){if(A<0){A=t}u=B.length;while((u-=1)>=0){if(B[u].index===t){break}}if(u<0&&(this._multi(y)||B.length===0)){B.push(this._createSelItem(t))}}}}else{if(typeof t==="number"&&t>=0&&t<n){B=[this._createSelItem(A=t)]}}if(this._selChange(B,q,1)){if(A>=0){this._fixSelScroll(this._scrollTo=A);if(C){this._updateFromList(q,1,1)}}this._selChanged(q)}if(k){this._activate(l,q)}},_createSelItem:function(j,k,l){return{index:j,value:l||this._item(j),text:k||this._item(j,2)}},_item:function(l,s){var r,k,q,j,n=this.options,m=this._keyVal,p=this._data[l];if(s){m=this._key}if(!p){return s?"":null}r=p[m];if(!s){return r}j=j||n.format;if(j){if(b(q=p[k=m+"_"])){if(b(r)){r=""}else{if(a.ig&&a.ig.formatter&&(typeof r==="number"||(r&&r.getMonth))){r=a.ig.formatter(r,null,(j==="auto"||j===true)?null:j)}else{r=r.toString()}}p[k]=r}else{r=q}}else{r=b(r)?"":r.toString()}if(s!==1){return r}k=n.itemTemplate;if(k&&a.ig.tmpl){r=this._q;if(!r){r=this._q=a("<div />")}return r.html(a.ig.tmpl(k,p)).html()}if(r===""){return"&nbsp;"}k=this._matchFlag;return k?this._renderMatches(r,n,k):r},_renderMatches:function(j,u,r){var l,k,p,m,n,x=u.caseSensitive?j:j.toLowerCase(),t=0,v=0,s=[],w=this._textsTemp||this._texts(1),q=w.length;while(t<99999){k=-1;t=99999;m=x.length;while((k+=1)<q){l=x.indexOf(w[k]);p=w[k].length;if(l>=0&&l<t&&(l===0||r!=="startsWith")&&!(r==="full"&&m!==p)&&p){t=l;n=p}}if(t<99999){s.push({index:v+=t,len:n});x=x.substring(t+n);v+=n}if(r!=="multi"||v>=m){break}}for(k=s.length-1;k>=0;k-=1){l=s[k].index;m=s[k].len;j=j.substring(0,l)+'<span class="'+this.css.listItemMatch+'">'+j.substring(l,l+m)+"</span>"+j.substring(l+m)}return j},_renderRow:function(r,w){var y,n,j,q,x,l,u=this,s=u._itemWidth,v=u.options,m=u._checkBox(v),k=u._cbWidth||0,p=u._html,t=u._lodWait&&!p;if(t){if(u._findItem(r+u._virtualTop)){return}w=false}if(p){w=false;if(!u._data[r]){return}p+='<li tabIndex="-1" class="'+u.css.listItem+'" style="width:';p+=s+"px;height:"+u._itemHeight+'px" unselectable="on" data-id="'+(r+d)+'"'}else{if(!w){n=a("<li />").addClass(u.css.listItem).css({width:s,height:u._itemHeight}).attr("data-id",r+d).attr("tabIndex",-1).attr("unselectable","on").appendTo(u._itemsHolder);if(m){j=a("<span />").attr("data-box","x").attr("unselectable","on").css("top",(u._cbTop||0)+"px").addClass(u.css.checkbox).appendTo(n.attr("data-check","x"));a("<span />").attr("data-icon","x").attr("unselectable","on").addClass(u.css.checkboxOff).appendTo(j);if(!k){u._cbWidth=k=j[0].offsetWidth}l=a("<span />").attr("data-txt","x").attr("unselectable","on").addClass(u.css.listItemTextWithCheckbox).css(u._rtl?"marginRight":"marginLeft",(Math.max(k,14)+3)+"px").prependTo(n)}else{n.attr("data-txt","x")}}}r+=u._virtualTop;if(w){n=this._findItem(r);if(!n){return}if(!v.virtualization&&!u._matchFlag){return n}}y=u._item(r,1);if(p){if(m){p+=' data-check="x"><span unselectable="on" data-txt="x" style="'+(u._rtl?"margin-right:":"margin-left:")+(Math.max(k,14)+3)+'px;" class="'+u.css.listItemTextWithCheckbox+'">'+y+"</span>";p+='<span unselectable="on" data-box="x" style="top:'+(u._cbTop||0)+'px" class="'+u.css.checkbox;p+='"><span unselectable="on" data-icon="x" class="'+u.css.checkboxOff+'"></span></span>'}else{p+=' data-txt="x">'+y}u._html=p+"</li>"}else{if(!u._data[r]){n.hide();l=u._findItem(r+1);if(l){l.hide()}}else{if(n[0]._old!==y){n[0]._old=y;l=n.find("[data-txt]");if(l.length===0){l=n}if(y!==l[0].innerHTML){l.html(y)}if(m&&b(u._cbTop)){j=n.find("[data-box]");if(j[0]&&(x=n[0].clientHeight)>0&&(q=j[0].offsetHeight)>0){if(q>=x){n.css("height",x=q+1)}u._cbTop=Math.max((x-q-1)/2,0)}}n.show()}}}if(t){u._bindLIs(v,n)}return n},_isCheckBox:function(j){return j&&(j.getAttribute("data-box")||j.parentNode.getAttribute("data-box"))},_fixNull:function(j){var l,k=this.options.nullText;if(!k&&!this._nullT){return}l=this.text();if(!j&&l===""&&k&&!this._fcs){this._nullT=true;this.fieldElem.addClass(this.css.nullText).val(k)}else{if(this._nullT){this._nullT=null;this.fieldElem.removeClass(this.css.nullText).val("")}}},_onScroll:function(m){var n,s,r,t,o,u,l,q=this,j=q._count,p=q._itemHeightOuter,k=q._ddScroll||q._ddCont;if(!k||!q._ddOn||j<2||q._lodWait){return}o=Math.floor((u=k[0].scrollTop)/p);if(m){q._lastScroll=u}u=Math.floor(q._lastScroll/p+0.4);if(q._lod&&u>j-q._page*1.5){l=q._dataSource;u=l.pageIndex();if(u+1<l.pageCount()){q._wait(q._lodWait=true);l.pageIndex(u+1);return}}q._topID=u=Math.max(0,Math.min(u,j-Math.floor(k[0].offsetHeight/p)));if(q._ddScroll){q._fixActive(q._activeID);j=q._page+1;q._virtualTop=u;s=q.options.selectedItems;t=s?s.length:0;q._selElems=[];while((j-=1)>=0){n=q._renderRow(j,1);if(n){for(r=0;r<t;r+=1){if(s[r].index===j+u){q._selElems.push(n);q._fixSelElem(n,1);break}}if(r>=t){q._fixSelElem(n)}}}q._fixActive(q._activeID,1)}else{q._repaintList()}},_lodLbl:function(){var k=-1,j=this.listElem;while(k++<3&&this._lodFoot&&j){j.find("[data-lod"+k+"]").html(this.getRecordsCount(k))}},_touch:function(k){var l,j=this._ddCont;if(j&&j.igScroll){l=j.data("igScroll");if(!k){return l?l.barY:j.igScroll({direction:"y",yThumb:"draggable",yScroller:this._ddScroll}).attr("data-scroll","y")}if(l){l.destroy()}}},_xyCheck:function(j){var k=this._xy,l=this.mainElem;if(!k){return}if(l){l=l.offset();if(Math.abs(l.left-k.x)>2||Math.abs(l.top-k.y)>2){j=true}}if(j||!l){delete this._xy;clearInterval(k.i);this._doDrop()}},_doDrop:function(R,u,N){var B,K,W,Y,l,O,P,I,x,S,s,X,v,V,k,C,t,j,F,A,J=this,G=J._lod,H=J._lodWait,T=J._listUp,z=J._extraHeight||0,p=J._ddCont,L=J.options,Q=J._rtl,U=L.virtualization,n=J.listElem,E=J._itemsHolder,q=J._ddScroll,w=J.mainElem,r=J._ddItemBorderFix,M=J._ddOn,m=J._count,D=J._itemHeightOuter;N=N||J._listChanged;if(J._mode(L)>2){R=0}if((!R&&!M)||(R===2&&M)){return}if(!N&&M&&R&&f()-M<100){return}R=R?(N||!M):false;if(!J._hasData){if(R&&L.dataBindOnOpen&&!J._dataSource){J.dataBind();setTimeout(function(){J._doDrop(2,u)},0)}return}if(m<1&&J._filtering){O=J._noResults;if(!O){J._noResults=O=e(a("<li />").css({width:"100%",textAlign:"center"}).addClass(J.css.listItem).html(J._locale("noMatchFoundText")||"&nbsp;"))}}if((!R||(R&&!M))&&!J._fire(R?"dropDownOpening":"dropDownClosing",u,j={owner:J,element:n||a("<div/>")})){return}if(!H&&R&&J._activeID>=0&&!J.isSelected(J._activeID)&&(C=J.selectedIndex())>=0){J._activate(J._scrollTo=C,u,1)}k=!L.dropDownAsChild;if(!n){N=false}if(!n||N){delete J._listChanged;if((V=parseInt(L.dropDownWidth,10))<5||isNaN(V)){if((V=w[0].offsetWidth)<5){V=100}}if(!n){n=J.listElem=q=p=e(j.element.attr("data-id",d-1).css("position","absolute").addClass(J.css.list).bind(J._mEvts).bind({DOMMouseScroll:function(o){J._onEvt(this,10,o)},mousewheel:function(o){J._onEvt(this,10,o)}}));A=L.footerTemplate;if(L.headerTemplate||A){n.css("overflow","hidden");if(L.headerTemplate){e(a("<div/>").attr("data-id",d-1).css({overflow:"hidden",position:"relative"}).html(L.headerTemplate).appendTo(n))}q=p=e(a("<div/>").attr("data-id",d-1).css("position","relative").appendTo(n));if(A){C=A;A=A.replace(this.RECORDS_VIEW,'<span data-lod0="x"></span>').replace(this.RECORDS_DATA,'<span data-lod1="x"></span>').replace(this.RECORDS_SERVER,'<span data-lod2="x"></span>').replace(this.RECORDS_SERVER_TOTAL,'<span data-lod3="x"></span>');J._lodFoot=C!==A;e(a("<div/>").attr("data-footer","x").attr("data-id",d-1).css({overflow:"hidden",position:"relative"}).html(A).appendTo(n))}z=1}J._ddCont=p;J._itemsHolder=E=e(a("<ul/>").attr("data-id",d-1).addClass(J.css.listItemHolder).appendTo(p));if(U){p.css({overflow:"hidden"});J._ddScroll=q=e(a("<div/>").attr("data-id",d-1).css({width:"30px",height:"100%",overflowY:"scroll",overflowX:"hidden","float":Q?"left":"right"}).appendTo(p));J._ddScrollChild=e(a("<div/>").attr("data-id",d-1).css({width:"1px",height:"1px"}).appendTo(q))}q.scroll(function(o){J._onScroll(o)});if(J._rtl){n.css("direction","rtl")}if(k){n.css({left:"0px",top:"0px"}).appendTo(a("body"))}else{n.prependTo(w)}J._ddBorderFix=n.outerWidth()-n.width();if(z){p.hide();n.css("width",V-J._ddBorderFix);J._extraHeight=z=n[0].clientHeight;n.css("width","auto");p.show()}}n.css({display:"block"});F=(V-=J._ddBorderFix);if(O){if(E.has(O).length===0){O.appendTo(E)}D=Math.max(10,O.outerHeight());r=0}else{if(!H){if(U){q.hide();E.css({width:"auto",height:"auto",overflow:"visible","float":"left"})}else{J._keyFixed=1}}}if(!D&&m>0){J._itemWidth=V=Math.ceil(V-1);J._itemHeight="auto";O=J._renderRow(0);if((B=O.height())<5){B=16}O.css({height:J._itemHeight=B});J._ddItemBorderFix=r=Math.max(0,Math.floor(O.outerWidth()-O.width()+0.4));if(r>0){J._itemWidth=(V-=r)}J._itemHeightOuter=D=O.outerHeight()+Math.max(0,E[0].offsetHeight-O[0].offsetHeight);J._sameBC(O,n)}J._listHeight=Math.max(10,Math.max((I=L.dropDownMinHeight)-z,D*(m||1)));I=Math.min(Math.max(0,Math.max(I,L.dropDownMaxHeight)-z),J._listHeight);if(G){I=Math.min((G-1)*D,I)}B=p.css("height");B=(N&&B&&B.indexOf("px")>0)?parseFloat(B):I;n.css("width",F);K=J._listHeight>I;if(U){J._ddScrollChild.css("height",J._listHeight+D);p.css("height",J._listHeight=I);n.css("height",I+z);if(K){q.show();q.css("width",V=q[0].offsetWidth-q[0].clientWidth+1);V=F-V;E.css({width:V,height:"100%",overflow:"hidden","float":Q?"right":"left"});V-=r;m=Math.ceil(I/D+1)}else{q.hide();E.css("width","100%")}}else{p.css({overflow:K?"auto":"hidden",width:F,height:J._listHeight=I}).css("overflowX","hidden");n.css("height",I+z);if(K){P=a("<div/>").css({position:"absolute",top:(I+100)+"px",width:9,height:9}).appendTo(p);V=p[0].clientWidth;V=p[0].clientWidth-r;P.remove()}}if(!K){V=F-r}J._itemWidth=V;this._repaintList(0,m);J._page=Math.max(2,Math.floor(I/D));if(N&&M){if(J._needsSel){J._fixSelScroll(-1);delete J._needsSel}C=J._listHeightLast;B=J._listHeight+z;r=C-B;if(T){x=J._listTop;J._listTop+=r}J._listHeightLast=B;if(r){if((t=(r<0)?L.animationShowDuration:L.animationHideDuration)>5){n.css("height",C).animate({height:B},{duration:t,step:function(o){if(T){n.css(k?"top":"marginTop",x+r*(C-o)/(C-B))}}})}else{if(T){n.css(k?"top":"marginTop",x+r)}}}return}}B=J._listHeightLast=J._listHeight+z;J._ddOn=R?f():null;t=R?L.animationShowDuration:L.animationHideDuration;if(!t||(typeof t==="number"&&t<5)){t=null}else{v=R?L.animationShowEffect:L.animationHideEffect;if(!a.effects||!a.effects[v]){if(!R&&typeof t!=="number"){t=450}v=null}}J._listHeightEnd=(t&&!v)?0:B;x=function(){if(R){n.css("filter","");J._fixSelScroll(J._scrollTo);J._touch()}else{n.css({display:"none"})}J._fire(R?"dropDownOpened":"dropDownClosed",u,j)};S=function(y,o){if(J._listUp&&o&&o.prop==="height"){n.css(k?"top":"marginTop",J._listTop+B-y)}};if(R){J._lodLbl();J.setFocus();if(J._needsPaint){J._repaintList()}if(!k&&(!J._static||J._relative)){w.css("overflow","visible")}if(J._needsSel){J._fixSelScroll(-1);delete J._needsSel}W=999;l=document.body;s=document.documentElement;if((C=window.innerHeight)>50&&C){W=C}else{if((C=s.clientHeight)>50&&C){W=C}else{if((C=l.clientHeight)>50&&C){W=C}}}Y=Math.max(l.scrollTop,s.scrollTop);X=w.offset();J._xy=k?{x:X.left,y:X.top}:null;X.height=w[0].offsetHeight;J._listUp=null;if((T=X.top+X.height+B-Y-W)>0&&Y-X.top+B<T){J._listUp=T;if(X.top-(T=B+2)<Y&&!J._filtering){T=Math.max(X.top-Y,2)}X.top+=(X.height=-T)+g(w,"borderTopWidth");w.addClass(J.css.noTopCorners);n.addClass(J.css.noBottomCorners)}else{X.top+=X.height-g(w,"borderBottomWidth");w.addClass(J.css.noBottomCorners);n.addClass(J.css.noTopCorners)}n.css({opacity:(t&&!v)?0:1,height:J._listHeightEnd,display:""});if(k){n.css({left:X.left,top:J._listTop=X.top});J._xy.i=setInterval(function(){J._xyCheck()},300)}else{C=J._rtl?"Right":"Left";n.css("margin"+C,-g(w,"border"+C+"Width")+"px");T=J._listUp?0:g(w,"borderTopWidth")+g(w,"borderBottomWidth");n.css("marginTop",J._listTop=X.height-T);T=n.offset();if((T=T.left-X.left)>30&&T<w[0].offsetWidth+10){n.css("marginLeft",-T+"px")}}if(!t){x()}else{if(v){n.show(v,{},t,x)}else{n.animate({opacity:1,height:B},{duration:t,complete:function(){x()},step:function(y,o){S(y,o)}})}}}else{if(!k&&(!J._static||J._relative)){w.css("overflow","hidden")}J._xyCheck(true);w.removeClass(J.css.noTopCorners).removeClass(J.css.noBottomCorners);n.removeClass(J.css.noBottomCorners).removeClass(J.css.noTopCorners);if(!t){x()}else{if(v){n.hide(v,{},t,x)}else{n.animate({opacity:0,height:J._listHeightEnd},{duration:t,complete:function(){x()},step:function(y,o){S(y,o)}})}}}return true},_repaintList:function(k,j){if(this._noMouse()){return}var l=this,m=!j;if(m){k=Math.max(0,this._topID-1);j=k+((this._ddScroll||this._matchFlag)?this._page+3:-1)}delete this._needsPaint;this._textsTemp=this._texts(1);if(!m&&(!this._lodWait||(this._lod&&this._filtering===-1))){this._html=" "}while(k<j){this._renderRow(k,m);k+=1}if(this._html){this._itemsHolder.html(this._html.substring(this._bindLI=1));delete this._html;setTimeout(function(){l._bindLIs()},600)}if(this._paintAct){this._fixActive(this._activeID,1)}delete this._textsTemp},_startOfSelTrail:function(m,s,n){var o,p,k=0,q=0,r=this._tr();if(r===1){q=m.selectionStart;k=m.selectionEnd}else{if(r){try{o=document.selection.createRange();r=o.duplicate();r.move("textedit",-1);try{while(r.compareEndPoints("StartToStart",o)<0){r.moveStart("character",1);if((q+=1)>n){break}}}catch(l){}k=q+o.text.length}catch(j){}}}if(q===n&&n>2){p=this._sep();if(p.length>1&&s.charAt(n-1)===p.charAt(1)&&s.charAt(n-2)===p.charAt(0)){return q-1}}return(q<k&&k===n)?q:0},_tr:function(){var l=this.fieldElem[0],m=this._trVar;if(!m){try{if(!a.browser.msie&&!b(l.selectionStart)){m=1}}catch(k){}if(m!==1){try{m=l.createTextRange?l.createTextRange():null}catch(j){}}this._trVar=m}return m},_setCaret:function(l,j){var m=this._tr();j=j||l;if(m){try{if(m===1){m=this.fieldElem[0];m.selectionStart=l;m.selectionEnd=j;return}if(this._selTime&&f()-this._selTime<50){return}j-=l;m.move("textedit",-1);m.move("character",l);if(j>0){m.moveEnd("character",j)}m.select()}catch(k){}}},_autoComplete:function(n){var v,D,A,l,k,s,C,E,r,u,p=-1,q=this._filtering?this._activeID:this._changeID,m=this.fieldElem,j=this._acArgs,x="",y=0,w=this.options,z=w.selectedItems,t=z?z.length:0,B=this._sep();if(!j||this._noMouse()){return}delete this._acArgs;D=j.txt;A=j.len;l=j.e;if(l&&l.keyCode===a.ui.keyCode.DELETE&&this._custom()){return}k=j.backKey;v=D.length;if(t>0){if(n){q=-1}E=D.split(B);C=z;z=[];n=m.val();while((p+=1)<t){s=C[p].text;for(r=0;r<E.length;r+=1){if(E[r]===(w.caseSensitive?s:s.toLowerCase())){z[r]=s;if(n===E[r]&&n!==s){m.val(s)}break}}if(r===E.length&&!u){u=s}}while(p>=0){s=(p<t)?z[p]:u;if(s){if(x.length>0){x=B+x}x=s+x}p-=1}}n=null;s=(q>=0)?this._item(q,2):null;if(s&&(!x||x!==s)){if(x){x+=B}x+=s}if(x&&v>1&&A===v&&this._multi(w)&&!k&&D.charAt(v-1)===B.charAt(0)){if(q>=0){this._addSel(q,l);this._fixSelScroll(-1)}D=(x+=B);n=A=p=x.length}this._userTxt=D;if(!x){if(v>0&&!this._filtering){this._fire("noMatchFound",l,{owner:this,text:D})}if(!k){return}}else{if(A<(y=x.length)||p>0){m.val(this._oldTxt=x)}else{if(k){y=A=v}else{return}}}this._setCaret(A,y);this._userTxt=D.substring(0,A);this._selLen=y-A;if(n&&this._multi(w)&&this._filtering){this.filter(l)}},_onChange:function(l,n,u,k){var t,p,v,j,q=this,m=q.fieldElem,s=q._oldTxt,r=q.options;if(!m||!m[0]){return}if(q._hasData&&q._nullT&&n===undefined&&!q._fcs){q._fixNull(1)}if(!b(u)){m.val(q._userTxt=u);u=1}v=q.text();p=v.length;if(l&&l.type!=="blur"&&(u||n===2)){q._setCaret(p)}if(!q._expr&&k===true&&r.autoComplete&&p>0&&(t=q._startOfSelTrail(m[0],v,p))>0){h(l);return q._onChange(l,1,v.substring(0,t-1),2)}if(v!==s||(q._selLen===1&&!n&&q._userTxt&&s.length-q._userTxt.length===1)){if(v===s){q._userTxt=s}delete q._filterTxt;q._oldTxt=v;q._fixClear();q._needsPaint=1;if(l){q._fire("textChanged",l,{owner:q,oldText:s,text:v});if(q._validator){q._validator._evt(l)}}j=r.autoComplete&&(p>0||k);if(q._filtering){if(n===2&&q._multi(r)){q._repaintList();return}q._userTxt=v;q.filter(l)}else{if(n!==2){q._select(null,v,2,1,l)}if(!j){q._userTxt=v;q._repaintList()}}if(j){q._acArgs={txt:v,len:p,e:l,backKey:k};if(q._filtering>=0){setTimeout(function(){if(!q._jpn){q._autoComplete()}q._repaintList()},0)}}}if(!n){setTimeout(function(){q._onChange(l,1)},10)}else{q._save(r);if(l&&!q._ddOn&&q._fcs){q._doDrop(1,l)}}},_save:function(n){var l,k,q,p,j=-1,r="",m=n.inputName;if(!m||!this._hasData||this._waitFilter){return}k=a('input[name="'+m+'"]');if(k[0]===this.element[0]){return}if(k.length===0){k=a('select[name="'+m+'"]');q=k.length;if(q){k.empty()}else{k=a('<input type="hidden" name="'+m+'" />').appendTo(this.element.parent())}}p=n.selectedItems;while(p&&(j+=1)<p.length){l=this._item(p[j].index);if(l&&l.getTime){l=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"."+l.getMilliseconds()}if(q){a('<option value="'+l+'" selected="selected" >').appendTo(k)}else{if(j>0){r+=","}r+=l}}if(j<1&&this._custom()){r=this.text();if(q){a('<option value="'+r+'" selected="selected" >').appendTo(k)}}if(!q){k.val(r)}},_onKey:function(m,w){var p=m?(m.keyCode||m.which):null,r=this,u=r._ddOn,n=r._activeID,t=r.options,q=a.ui.keyCode,v=t.selectedItems,j=p===q.BACKSPACE,l=r._count-1,s=r._mode(t);if(w<2&&!r._fire((w===0)?"keydown":"keypress",m,{owner:r,keyCode:p})){return h(m)}if(w<2&&p===q.SPACE&&(s>0||(t.selectItemBySpaceKey&&n>=0&&t.enableActiveItem&&u))){h(m);if(s<2&&n>=0&&w===0){r._fixSelScroll(n,m,null,null,1)}return}if(w<2&&(j||p>40||p===q.SPACE)&&s===0){r._jpn=p===229;r._onChange(m,null,null,j)}if(w===0){if(m.shiftKey){return}if(p===q.ESCAPE){if(!u){setTimeout(function(){r._onChange(m,null,r._focTxt)},0)}else{h(m);r._doDrop(0,m)}}if((u||n>=0)&&(p===q.ENTER||p===q.NUMPAD_ENTER)){h(m);if(s<2){if(n>=0&&t.enableActiveItem&&!r.isSelected(n)){r._fixSelScroll(n,m,null,null,1)}r._updateFromList(m)}r._doDrop(0,m)}if(p<33||p>40){return}if(m.ctrlKey){return}if(!m.altKey&&!m.metaKey){if(r._count<1){return}if(n<0){if(!u&&p!==q.DOWN&&p!==q.UP){return}n=l+1;j=v?v.length:0;while((j-=1)>=0){n=Math.min(v[j].index,n)}if(n>l){n=0}}else{if(p===q.DOWN){n+=1}else{if(p===q.UP){n-=1}else{if(p===q.HOME&&u){n=0}else{if(p===q.END&&u){n=l}else{if(p===q.PAGE_DOWN&&u){n+=r._page}else{if(p===q.PAGE_UP&&u){n-=r._page}else{return}}}}}}}h(m);if((n=Math.max(Math.min(n,l),0))!==r._activeID){if(r._activate(n,m)){if(u){r._fixSelScroll(n,m,null,1)}else{r.selectedIndex(n,true)}}}}else{if((p===q.DOWN&&!u)||(p===q.UP&&u)){return r._doDrop(u?0:1,m)}}}},_sep:function(){var j=this.options.itemSeparator||",";return(j.length>2)?j.substring(0,2):j},_updateFromList:function(k,t,j){var m=this._changeID,s="",p=this.options,l=-1,r=this._sep(),q=this._addSel((m===this._activeID)?m:-1,k),n=q?q.length:0;delete this._jpn;if(this._noMouse()){return}this._changeID=-1;if(!this._multi(p)&&n>1){n=1}while((l+=1)<n){s+=this._item(q[l].index,2);if(l+1<n||j){s+=r}}if(s.length>0||t){this._onChange(k,2,s)}},_findItem:function(k){var j=this._itemsHolder;if(j){k-=this._virtualTop;j=j.find('[data-id="'+(k+d)+'"]');if(j.length===1){return j}}},_fixSelScroll:function(m,k,l,n,j){if(this._fixSel(m,k,l,n,j)){return}if(k){this._updateFromList(k,j);if(!j&&!n&&this.options.closeDropDownOnSelect){this._doDrop(0,k)}}if(n||!k){this._fixScroll(m)}},_fixActive:function(l,m){var j=this.css.listItemActive,k=(l>=0&&this.options.enableActiveItem)?this._findItem(l):null;if(k){if(m){k.addClass(j)}else{k.removeClass(j)}delete this._paintAct}else{if(m){this._paintAct=1}}},_activate:function(l,k,m){if(!this.options.enableActiveItem||this._noMouse()){this._activeID=l;return 1}var j,n=this._activeID;if(n!==l&&this._fire("activeItemChanging",k,j={owner:this,oldIndex:n,index:l})){this._fixActive(n);this._fixActive(this._activeID=l=j.index,1);if(l>=0&&!m&&(!k||k.type!=="mousedown")){this._fixScroll(l)}this._fire("activeItemChanged",k,j)}},_fixSel:function(n,k,l,q,j){var p,s=0,m=n,t=this.options,w=this._copyA(t.selectedItems),r=w?w.length:0,v=this._selElems,x=this._ddScroll,u=(x&&n<0)?null:this._selElems;if(!this._ddOn||this._noMouse()){return 1}if(n>=0&&!l){l=this._findItem(n);if(!l){u=null;while(x&&!l&&m>=0&&m<=this._count&&(s+=1)<4){this._fixScroll(m);this._onScroll(k);l=this._findItem(n);m-=1}}if(!l){return 1}}for(m=0;m<r;m+=1){p=u?u[m]:null;if(!p){p=this._findItem(w[m].index);if(p){if(!u){this._selElems=u=[]}this._fixSelElem(u[m]=p,1)}}if(n<0||!p||!k){continue}if(p[0]===l[0]){if(!j){if(r===1){return}}else{w.splice(m,1);if(this._selChange(w,k)){this._fixSelElem(l);u.splice(m,1);this._selChanged(k)}else{this._selElems=v}return}}else{if(!j){this._fixSelElem(p)}}}if(!l||!k){return}m=null;if(!j||!w||!this._multi(t)){m=w=[];u=[]}w.push(this._createSelItem(n));if(this._selChange(w,k,m)){this._activate(n,k);u=u||[];u.push(l);this._selElems=u;this._fixSelElem(l,1);this._selChanged(k)}else{this._selElems=v;return 1}},_fixScroll:function(l){var n,o,m=this._lastScroll,j=this._ddScroll||this._ddCont,k=this._itemHeightOuter;if(!j||this._lodWait){return}o=n=j[0].scrollTop;this._scrollTo=-1;if(l<0){if(m&&m!==o){j[0].scrollTop=m;o=j[0].scrollTop}if(a.browser.safari&&o>20){j[0].scrollTop=o-1}}else{if((o=l*k)>n){if((o+=k-this._listHeight)<n){return}}}if(o!==m){if(this._ddScroll&&o>m){o+=k-1}j[0].scrollTop=o}},_bindLIs:function(n,l){var m=this,k=m._itemsHolder,j=l;if(!l){if(!this._bindLI||!k){return}delete this._bindLI;j=k.find("li[data-id]")}j.bind(m._mEvts);if(m._checkBox(n||this.options)){if(!m._evtHov){m._evtHov={mouseover:function(o){m._onEvt(this,16,o)},mouseleave:function(o){m._onEvt(this,17,o)}}}j=l||k;j.find("span[data-box]").bind(m._evtHov).bind(m._tEvts).find("span[data-icon]").bind(m._tEvts)}},_onEvt:function(l,x,k){var r,q,w,t=this,v=t.options,j=t.css,p=t.fieldElem,m=(!l||l===p[0]||(k&&k.target===p[0]))?p:a(l),s=m.attr("data-id"),n=t.mainElem,u=t._mode(v);if(v.disabled){return}if(x===8){t._focTxt=t.text();t._fcs=1;n.addClass(j.focus);p.addClass(j.fieldFocus);t._fixNull();if(u<3){t.buttonElem.addClass(j.buttonFocus);t.clearElem.addClass(j.clearFocus)}if(!t._ddOn&&v.dropDownOnFocus){setTimeout(function(){if(t._fcs){t._doDrop(1,k)}},50)}return}if(x===9){r=t.text();if(k&&t._jpn&&a.browser.mozilla&&t._userTxt!==r){t._onChange(k,null,r)}t._jpn=t._fcs=0;n.removeClass(j.focus);p.removeClass(j.fieldFocus);t.buttonElem.removeClass(j.buttonFocus);t.clearElem.removeClass(j.clearFocus);if(!k){return}if(v.closeDropDownOnBlur){t._doDrop(0,k)}if(!t._custom()){t._updateFromList(k,1)}t._changeID=-1;t._onChange(k,null);t._fixNull();if(t._validator){t._validator._evt(k,null,1)}return}if(x===10){n=t._ddScroll||t._ddCont;v=k.originalEvent||k;r=k.wheelDelta||v.wheelDelta||-(k.detail||v.detail);if(!b(r,true)&&n){h(k);n[0].scrollTop+=(r>0)?-t._itemHeightOuter:t._itemHeightOuter}return}if(!s&&x>15){s=m.parent().attr("data-id")}s=(m===p)?0:isNaN(s=s?parseInt(s,10):-1)?-1:s;if(s>90){t._bindLIs(v)}if(s<0||(s>98&&t._noMouse())){return}if(x===3){h(k)}if(u>1&&(x>7||s>3)){return}if(x===16){return m.addClass(j.checkboxHover)}if(x===17){return m.removeClass(j.checkboxHover)}q=(s>=d)?(t._touch()?"":j.listItemHover):((s===1)?j.buttonHover:j.clearHover);w=(s>=d)?"":((s===1)?j.buttonPressed:j.clearPressed);if(x===3){if(s<3){m.addClass(w)}return}if(s===d-1){return}if(x===4){if(s>=d){delete t._jpn;t._fixSelScroll(s-d+t._virtualTop,k,m,null,k.ctrlKey||k.metaKey||t._isCheckBox(k.target))}else{if(m.hasClass(w)){if(s===1){t.setFocus();t._doDrop(1,k)}if(s===2){t._onChange(k,null,"")}m.removeClass(w)}}return}if(x===6){if(s===0){p.addClass(j.fieldHover);n.addClass(j.hover)}else{m.addClass(q);if(s>=d){t._hoverItem={el:m,id:s-d}}}}if(x===7){if(s===0){n.removeClass(j.hover);p.removeClass(j.fieldHover);if(t._fcs===1){n.addClass(j.focus)}}else{m.removeClass(q).removeClass(w)}}},_fixClear:function(l){var j=this.options,k=j.enableClearButton&&this._oldTxt.length>0&&this._mode(j)<2&&!j.disabled;if(this._jpn&&a.browser.mozilla){return}if(this._clearOn!==k){this._clearOn=k;l=1}if(l){this._doSize()}},_doTimer:function(j){var k=this,l=k._timer;if(j===2){if(l){clearInterval(l);delete k._timer}return}if(!l){k._timer=setInterval(function(){k._doTimer()},200)}if(j===1){return}if(k._doSize(1)&&!k._percWidth&&!k._percHeight){k._doTimer(2)}},_doButHeight:function(j,p){var k,l,m=this._butMinHeight,o=j,n=this._minHolderHeight;this.clearElem.css("height",p?"100%":j-n);j=Math.max(j-m,0);this.buttonElem.css("height",p?j/o*100+"%":j);k=this.buttonElem.children(0);l=k[0].offsetHeight||16;k.css("marginTop",Math.floor((o-(m||0)-l)/2+0.5)+"px");k=this.clearElem.children(0);k.css("marginTop",Math.floor((o-n-(k[0].offsetHeight||l))/2+0.5)+"px")},_outerWidth:function(j){return j[0].offsetWidth+g(j,"marginLeft")+g(j,"marginRight")},_outerHeight:function(j){return j[0].offsetHeight+g(j,"marginTop")+g(j,"marginBottom")},_sameBC:function(k,l){var j=k.css("backgroundColor");l.css("background",(!j||j==="transparent"||j.replace(/ /g,"").indexOf("(0,0,0,0")>0)?"white":j)},_doSize:function(M){var v,w,K,J,k,y,z,B=this,G=B.options,N=G.width,x=G.height,L=B._relative,j=B.buttonElem,q=B.css,r=B.mainElem,s=r[0],t=B.fieldElem,u=B._fieldHolder,n=B._clearOn,C=B._minFieldHeight,D=B._minFieldWidth,F=B._minHolderWidth,E=B._minHolderHeight,l=B._butWidth,p=B._clearWidth,A=B._lastHeight,m=B.clearElem,I=s.offsetWidth,H=s.offsetHeight;if(I&&!B._offsetWidth&&(!N||!x)){w=a("<span />").css({display:"inline-block",position:"absolute"}).addClass("ui-igcombo").appendTo(B.element.parent());if(!N){N=w[0].offsetWidth;if(N>10){G.width=N}else{N=0}}if(!x){x=w[0].offsetHeight;if(x>10){G.height=x}else{x=0}}w.remove()}N=N||150;x=x||"auto";w=B._offsetWidth!==I||N!==B._lastWidth||B._offsetHeight!==H||x!==A;if(!I||(M&&!w)){if(!I){B._doTimer(1)}return}if(w){B._listRemove()}B._lastWidth=N;B._lastHeight=x;B._percWidth=K=typeof N==="string"&&N.indexOf("%")>0;B._percHeight=J=typeof x==="string"&&x.indexOf("%")>0;if(K||J){B._doTimer(1)}if(!A){B._sameBC(t,u);L=r.css("position")!=="static";if(!L&&(K||J)){r.css("position","relative");L=true}B._relative=L;t.css("position",L?"absolute":"static")}u.css({position:"absolute",width:"auto",height:"auto"});m.hide();t.css({width:0,height:0});if(!A){w=B._rtl?q.fieldHolderRTL:q.fieldHolderLTR;if(G.showDropDownButton){u.addClass(w)}else{u.removeClass(w)}w=B._rtl?q.buttonRTL:q.buttonLTR;if(G.showDropDownButton){j.addClass(w)}else{j.removeClass(w)}l=0;if(G.showDropDownButton){j.show();l=B._outerWidth(j);w=j.css("height");j.css("height",0);B._butMinHeight=B._outerHeight(j);j.css("height",w)}else{j.hide()}B._butWidth=l;B._minFieldWidth=D=B._outerWidth(t);B._minFieldHeight=C=B._outerHeight(t);B._minWidth=l+B._outerWidth(t);if(G.enableClearButton){m.show();B._clearWidth=p=B._outerWidth(m);m.hide()}t.hide();B._minHolderHeight=E=u[0].offsetHeight;B._minHolderWidth=F=u[0].offsetWidth;t.show()}w=i(N);if(w){N=w-g(r,"borderLeftWidth")-g(r,"borderRightWidth");if(N<1){N=1}}w=i(x);if(w){x=w-g(r,"borderTopWidth")-g(r,"borderBottomWidth");if(x<1){x=1}}r.css({width:N,height:x,display:"inline-block",minWidth:0,minHeight:0});I=s.clientWidth;H=s.clientHeight;u.css("height","auto");k=G.showDropDownButton?B._outerHeight(j):0;if(!L){u.css("position","static")}t.css({height:"auto",position:"static"});y=B._outerHeight(u);if(L){t.css("position","absolute")}if(n){m.show()}if(G.height){y=Math.max(H-E,0);u.css("height",J?y/H*100+"%":y);t.css("height",J?(y-C)/y*100+"%":y-E-C);B._doButHeight(H,J)}else{if(y<k){u.css("height",k-E);t.css("height",k-E-C)}else{B._doButHeight(y,J);t.css("height",y-E-C);if(L){u.css("height",y-E)}r.css("height",x=y)}}r.css({display:G.enableDisplayBlock?"block":"inline-block",minWidth:B._minWidth+p+2});N=Math.max(I-l-F,0);u.css("width",K?N/I*100+"%":N);I=s.clientWidth;z=u[0].offsetWidth;if((w=I-z-l)!==0){N+=w;u.css("width",K?N/I*100+"%":N)}v=N-D-1;if(n){v-=p}t.css("width",K?v/N*100+"%":v);if((w=u[0].clientWidth-B._outerWidth(t)-(n?p:0)-1)!==0){v+=w;t.css("width",K?v/N*100+"%":v)}if(!L){y=u[0].offsetHeight+5;r.css("height","auto");for(w=0;w<4&&N>0;w+=1){if(s.offsetHeight<y){break}N-=0.5;u.css("width",K?N/I*100+"%":N)}r.css("height",x)}B._offsetWidth=s.offsetWidth;B._offsetHeight=s.offsetHeight;return 1},_listRemove:function(){var j=this;if(!j.listElem){return}j._touch(true);j.mainElem.removeClass(j.css.noTopCorners).removeClass(j.css.noBottomCorners);j.listElem.remove();j._selElems=j.listElem=j._itemsHolder=j._ddCont=j._ddScroll=j._noResults=j._q=j._ddOn=j._extraHeight=j._listChanged=j._ddItemBorderFix=j._itemHeightOuter=j._bindLI=null;j._lastScroll=j._virtualTop=j._topID=0;j._activeID=j._scrollTo=-1},destroy:function(){var o,k,l=this.mainElem,j=this.css,p=this._oldCss,n=this.fieldElem,m=this.element;k=l?l[0]:null;if(!k){return this}this._doTimer(2);this._listRemove();this.validator(1);if(this._SELECT){l.remove();m.css("display",p.display)}else{n.removeClass(j.nullText).removeClass(j.fieldFocus).removeClass(j.fieldHolder).unbind(this._evts);if(this._swap){n.removeClass(j.field);n.insertBefore(l);l.remove()}else{this.buttonElem.remove();this.clearElem.remove();l.unbind(this._elemEvts).removeClass(j.combo).removeClass(j.hover).removeClass(j.focus).removeClass(j.disabled);n.remove()}for(o in p){if(p.hasOwnProperty(o)){m.css(o,p[o])}}p=this._oldAttr;for(o in p){if(p.hasOwnProperty(o)){m[0][o]=p[o]}}}delete this.mainElem;a.Widget.prototype.destroy.apply(this,arguments);return this},_getType:function(j){return(j===true||j===false)?"bool":((j&&j.getTime)?"date":(typeof j==="number"?"number":"string"))},dataBind:function(){var n,p,j,v,s=this.options,z=s.dataSourceUrl,r=s.loadOnDemandSettings,q=s.responseDataKey,x=s.textKey||s.valueKey,y=s.dataSourceType,A=s.valueKeyType,w=s.textKeyType,t={fields:[]},k=s.dataSource,l=k,m=typeof k==="string",u=q;A=(A==="auto")?null:A;if(m&&!y){l=k=new a.ig.JSONPDataSource({dataSource:k})}if(q&&k&&k[q]){t.searchField=q;l=k[q]}else{u=null}n=l?l[0]:null;if(typeof n==="string"||typeof n==="number"||(n&&n.getTime)){p=l.length;n=l;l=[];while((p-=1)>=0){l[p]={x:n[p]}}if(u){k[u]=l}else{k=l}}j={callback:this._dataChange,dataSource:k,type:y||undefined,responseDataKey:q,responseTotalRecCountKey:s.responseTotalRecCountKey};n=this._noMouse()?null:s.filteringType;this._filtering=(n==="local")?1:(n==="remote"?-1:0);if(l){l=l[0];for(n in l){if(l.hasOwnProperty(n)){if(!x){x=s.valueKey=s.textKey=n}p=this._getType(l[n]);if(!A&&n===s.valueKey){s.valueKeyType=A=p}t.fields.push({name:n,type:p});if(x!==n&&s.valueKey!==n){s._all=1}}}}if((k instanceof a.ig.DataSource&&!k.settings.schema)||!(k instanceof a.ig.DataSource)){j=a.extend(j,{schema:t})}if(k instanceof a.ig.DataSource){j.dataSource=k.settings.dataSource;k.settings=a.extend(true,{},k.settings,j);k.settings.callee=this;if(j.schema){k._initSchema()}}else{j.callee=this;k=new a.ig.DataSource(j)}w=(w==="auto")?null:w;t=(A||w)?k.schema():null;t=t?t.fields():null;p=t?t.length:0;while((p-=1)>=0){n=t[p];if(A&&n.name===s.valueKey){n.type=A}if(w&&n.name===s.textKey){n.type=w}}k._response_data=function(B){var C=B?B.length:0,o=(C>0)?B[C-1][":totals:"]:null;if(o){B.pop();o=o.split(":");k.totalRecordsCount(b(C=parseInt(o[0],10),true)?0:C);C=b(C=parseInt(o[1],10),true)?0:C;if(C){s._totalAll=C}}};delete this._lod;if(r&&r.enabled&&(z||m)){v=k.settings.paging;v.type="remote";v.appendPage=v.enabled=true;v.pageSizeUrlKey=r.pageSizeUrlKey||null;v.pageIndexUrlKey=r.pageIndexUrlKey||null;if(!b(p=parseInt(s._total,10),true)){k.totalRecordsCount(p)}r=parseInt(r.pageSize||30,10);v.pageSize=this._lod=b(r,true)?30:Math.max(r,5);v.pageIndex=0}if(this._fire("dataBinding",null,{owner:this,dataSource:k},1)){this._dataSource=k;this._keyVal=this._hasData=this._key_=null;this._listRemove();k.dataBind()}if(z&&!this._urlBind){v=k.settings;v.dataSource=z;v.type="remoteUrl";k._runtimeType=k.analyzeDataSource();v.urlParamsEncoded=a.proxy(function(o,B){B=B?B.filteringParams:null;if(B){B.textKey=s.textKey||s.valueKey;B.valueKey=s.valueKey;if(!s.caseSensitive){B.toLower="1"}if(!s._all){B.compact="1"}}},this);this._urlBind=1;if(!s.dataSource){k.dataBind()}}},_cond:function(j,k){return j.autoComplete?"startsWith":((k||!this._filtering)?j.renderMatchItems:j.filteringCondition)},_isStrCond:function(j){return j==="startsWith"||j==="endsWith"||j==="contains"||j==="doesNotContain"||j==="empty"||j==="notEmpty"},_texts:function(q){var j,k,p,m=q===1,l=this.options,n=this._multi(l)?this._sep():null;if(m||b(q)){q=this._userTxt||this._oldTxt}else{if(typeof q!=="string"){return[q]}}if(!l.caseSensitive){q=q.toLowerCase()}if(!n){return q?[q]:[]}while(q.indexOf(n+n)>0){q=q.replace(n+n,n)}p=n.length;k=q.length;if(m){if((j=q.lastIndexOf(n.charAt(0)))>0&&j===k-1){q=q.substring(0,k-=1)}if((j=q.lastIndexOf(n))>0&&j===(k-=p)){q=q.substring(0,k)}}else{if((j=q.lastIndexOf(n.charAt(0)))>0&&j===k-1&&p>1){q+=n.charAt(1)}}if(q.indexOf(n)===0){q=q.substring(p)}return q?q.split(n):[]},_fillKeys:function(k){if((k||!this._keyFixed)&&this._key!==this._key_){var j=this._count;while((j-=1)>=0){this._item(j,2)}}this._keyFixed=1},_wait:function(m){var j=this.css.waitFiltering,k=this.mainElem,l=this._itemsHolder;if(m){k.addClass(j);if(l){l.addClass(j)}}else{if(k){k.removeClass(j);if(l){l.removeClass(j)}}}},filter:function(l,v){var n,q,p=-1,u=v||this._texts(),r=u.length,j=r?u.toString():null,k=this._dataSource,s=this.options,m=[],t=this._filtering<0;if(this._noFilter||(this._hasData&&j&&this._filterTxt===j)){return}this._filterTxt=j;if(this._expr){this._filterNew={txt:u,e:l};return}delete this._filterNew;if(t&&r>1&&!u[r-1]){r=0}j=this._cond(s);q=(t||!this._isStrCond(j))?this._key:this._key_;while((p+=1)<r){m.push({fieldName:q,cond:j,expr:u[p]})}if(m.length===0&&!l){return}if(!this._fire("filtering",l,this._expr={owner:this,expression:m},1)){delete this._expr;return}if(t&&this._hasData&&!this._fire("dataBinding",null,{owner:this,dataSource:k},1)){delete this._expr;return}this._needsSel=u;this._needsSelEnd=this._multi(s)&&this._sepEnd(this.text());n=k.settings.filtering;n.caseSensitive=s.caseSensitive;n.type=s.filteringType;if(t){this._wait(true);q=s.filterExprUrlKey;if(q){n.filterExprUrlKey=q}n.expressions=m;this._waitFilter=!this._hasData;if(this._lod){u=this.text();if(this._lodTxt!==u){this._lodTxt=u;k._data=[];k._dataView=[];k._filteredDataView=[];k._cachedDataView=null;k.settings.paging.pageIndex=0;k.pageSizeDirty(true)}}k.dataBind();return}if(m.length===0){k.clearLocalFilter()}else{this._fillKeys();k.filter(m,"OR")}this._dataChange(l,true)},_checkExpr:function(){var j,l=this._filterNew,k=this._expr,m=l?l.txt.length:0;if(!l){return}if(k){k=k.expression}if(m!==(k?k.length:0)){j=1}while(!j&&(m-=1)>=0){j=l.txt[m]!==k[m].expr}if(j){delete this._expr;this.filter(l.e,l.txt);return 1}delete this._filterNew},_fixType:function(l){var j,k=this.options.valueKeyType;if(!b(l)){if(k==="number"){return(typeof l==="number")?l:parseFloat(l)}if(k==="bool"){return l==="true"||l===true}if(k==="date"&&!l.getTime){l=l.toString();j=l.replace(/[\. :]/g,"-").split("-");return(j.length===7)?new Date(parseInt(j[0],10),parseInt(j[1],10)-1,parseInt(j[2],10),parseInt(j[3],10),parseInt(j[4],10),parseInt(j[5],10),parseInt(j[6],10)):Date.parse(l)}}return l},_initSel:function(r){var n,t,l,m,j,q=1,s=r.selectedItems,p=s?s.length:0,k=-1;while(!this._multi(r)&&p>1){s.splice(p-=1,1)}l=p;while(l-->0){n=s[l];n.value=this._fixType(t=n.value)}j=r.text||((p===1&&this._custom(r))?t:null);r.text=null;while((k+=1)<this._count&&q){t=this._item(k);q=null;l=p;while((l-=1)>=0){n=s[l];if(b(m=n.index)||m<0){if(c(n.value,t)){if(this.isSelected(k)){s.splice(l,1);p-=1}else{n.index=k;n.text=this._item(k,2)}}else{q=1;if(k===this._count-1){s.splice(l,1)}}}else{n.value=n.value||this._item(m);n.text=n.text||this._item(m,2)}}}if(j&&(!s||!s.length)){this.text(j)}else{if(!this.text()||!this._custom(r)){this._updateFromList(null,1)}}},_dataChange:function(q,z){var l,H,F,E,m,G,s,t,r,w,k,A=this._lodWait,B=1,u=-1,j=-1,D=this._needsSel,v=-1,y=this._keyVal,x=this._key,n=this._itemsHolder,p=this._dataSource,C=this.options;if(!C||!this._multi){return}this._data=m=p.dataView()||[];this._count=l=G=m.length;if(!this._hasData&&!l&&C.dataSourceUrl&&C.selectedItems){this._urlSel=1}if(!y){y=C.valueKey;if(!y&&m[0]){for(y in m[0]){if(m[0].hasOwnProperty(y)){break}}}this._keyVal=y;x=C.textKey||y;this._key_=this._key=x;this._keyFixed=!C.format;if(!this._keyFixed){this._key_+="_"}}if(this._hasData){if(this._checkExpr()){return}if(this._urlSel===1){this._initSel(C);this._urlSel=2}else{if(this._urlSel||(A&&this.selectedIndex()<0)){H=this.text()}if(!A){this._activate(-1,q);this._clearSel();this._lastScroll=this._virtualTop=this._topID=0;this._scrollTo=-1}if(n){if(!A){n.empty()}this._listChanged=1}if(H){this._select(null,H,2)}}}if(this._expr){if((u=this._filtering)<0){this._fire("dataBound",null,{owner:this,dataSource:p},1)}if(!this._isStrCond(k=this._cond(C))){k="startsWith"}if(this._ddOn||(q&&q.type==="keydown")){this._doDrop(1,q)}this._fillKeys(1);F=D?D.length:0;E=[];while((v+=1)<l&&B){H=this._item(v,2);u=-1;B=null;while((u+=1)<F){if(D[u]){B=1;if(H&&p._findMatch(H,D[u],"string",!C.caseSensitive,k)){w=null;if(!E[u]){E[u]=w=this._createSelItem(v,H)}t=H.length===D[u].length;if(!s||t){s=1;G=Math.min(G,v);if(t){if(!r){G=v}r=1;E[u]=w||this._createSelItem(v,H);D[u]=null;if(!this._multi(C)){v=l+1}break}}}}}}while((F-=1)>=0){w=E[F];if(!w||(j<0&&!this._needsSelEnd)){if(w){j=w.index}if(!w||w.text!==H){E.splice(F,1)}}}this._selChange(E,q,null,1);this._selChanged(q);if(this._needsSelEnd){this._updateFromList(q,1,1)}if(j>=0){this._activate(G=j,q,1)}this._fixSelScroll(this._scrollTo=(G===l)?0:G);this._fire("filtered",q,this._expr,1);this._autoComplete(1);this._wait();delete this._waitFilter;delete this._expr}else{if(this._urlSel!==2){H=this.text();if(H&&!this._custom(C)&&this.selectedIndex()<0){this._select(null,H,2)}else{this._initSel(C)}}this._fire("dataBound",null,{owner:this,dataSource:p},1);if(this._urlSel===2){this._noFilter=1;this._updateFromList(null,1);delete this._noFilter;delete this._urlSel}else{if(this._filtering){this.filter()}}if(this._ddOn){this._doDrop(1,q,1)}}if(this._mode(C)>1&&this.selectedIndex()<0){this.selectedIndex(0)}if(m.length<1){this._fire("noMatchFound",q,{owner:this,text:this.text()})}this._hasData=1;this._fixClear();this._fixNull();this._save(C);if(this._lodWait&&!z){this._wait();this._fixSel();delete this._lodWait}this._lodLbl()},_locale:function(j){var k=this.options[j];if(b(k)){k=a.ig.Combo&&a.ig.Combo.locale?a.ig.Combo.locale[j]:null}return k||""},_titles:function(){var j=this._locale("clearButtonTitle");this.clearElem.attr("title",j).attr("longdesc",j);j=this._locale("dropDownButtonTitle");this.buttonElem.attr("title",j).attr("longdesc",j)},_fire:function(m,k,j,l){return(this._canFire||l)?this._trigger(m,k,j):true},_same:function(m,p){if(m===p){return true}if(!m||!p){return}var n,o,k,l,j=p.length;if(j!==m.length){return}while(j-->0){k=p[j];if((k&&!m[j])||(!k&&m[j])){return}for(l in k){if(k.hasOwnProperty(l)){n=k[l];o=m[j][l];if(n!==o&&((n&&!o)||(!n&&o)||!n.getTime||!o.getTime||n.getTime()!==o.getTime())){return}}}}return true},_setOption:function(l,n){var m=this.options,k=this.fieldElem,j=this.mainElem;if(this._same(m[l],n)){return this}if(l==="selectedItems"){this._clearSel()}if(l.indexOf("virt")===0||l.indexOf("Match")>0||l.indexOf("empl")>0||l.indexOf("drop")===0||l==="caseSensitive"||l==="format"||l==="enableActiveItem"){m=null}if(l==="multiSelection"||!m){this._listRemove()}a.Widget.prototype._setOption.apply(this,arguments);if(!m){return}if(l==="width"||l==="height"||l==="showDropDownButton"){this._lastHeight=null;this._doSize()}else{if(l==="selectedItems"||l==="multiSelection"){this._initSel(m);this._updateFromList(null,1)}else{if(l.indexOf("Title")>0){this._titles()}else{if(l.indexOf("dataS")===0||l.indexOf("fil")===0||l.indexOf("Key")>0||l.indexOf("OnDem")>0){this._hasData=false;this._lod=this._totalAll=m._totalAll=0;this.selectedIndex(-1);this.activeIndex(-1);this.dataBind()}else{if(l==="enableClearButton"){this._fixClear(1)}else{if(l==="tabIndex"||l==="disabled"){k.attr(l,n);this._fixClear()}else{if(l==="mode"){k.attr("readOnly",this._mode(m)>0);this._fixClear()}else{if(l==="enableDisplayBlock"){j.css("display",n?"block":"inline-block")}else{if(l==="itemSeparator"){this._updateFromList()}else{if(l==="text"){this.text(n)}else{if(l==="nullText"){this._fixNull()}else{if(l==="validatorOptions"){this.validator()}}}}}}}}}}}}return this}});a.extend(a.ui.igCombo,{version:"12.1.20121.1010"})}(jQuery));