/*
* Infragistics.Web.ClientUI HTML Editor localization resources 12.1.20121.1010
*
* Copyright (c) 2011-2012 Infragistics Inc.
*
* http://www.infragistics.com/
*
*/
$.ig=$.ig||{};if(!$.ig.HtmlEditor){$.ig.HtmlEditor={};$.extend($.ig.HtmlEditor,{locale:{boldButtonTitle:"Bold",italicButtonTitle:"Italic",underlineButtonTitle:"Underline",strikethroughButtonTitle:"Strikethrough",increaseFontSizeButtonTitle:"Increase Font Size",decreaseFontSizeButtonTitle:"Decrease Font Size",alignTextLeftButtonTitle:"Align Text Left",alignTextRightButtonTitle:"Align Text Right",alignTextCenterButtonTitle:"Center",justifyButtonTitle:"Justify",bulletsButtonTitle:"Bullets",numberingButtonTitle:"Numbering",decreaseIndentButtonTitle:"Decrease Indent",increaseIndentButtonTitle:"Increase Indent",insertPictureButtonTitle:"Insert Picture",fontColorButtonTitle:"Font Color",textHighlightButtonTitle:"Text Highlight Color",insertLinkButtonTitle:"Insert Hyperlink",insertTableButtonTitle:"Table",addRowButtonTitle:"Add Row",removeRowButtonTitle:"Remove Row",addColumnButtonTitle:"Add Column",removeColumnButtonTitle:"Remove Column",inserHRButtonTitle:"Insert Horizontal Rule",viewSourceButtonTitle:"View Source",cutButtonTitle:"Cut",copyButtonTitle:"Copy",pasteButtonTitle:"Paste",undoButtonTitle:"Undo",redoButtonTitle:"Redo",imageUrlDialogText:"Image URL:",imageAlternativeTextDialogText:"Alternative Text:",imageWidthDialogText:"Image Width:",imageHeihgtDialogText:"Image Height:",linkNavigateToUrlDialogText:"Navigate to URL:",linkDisplayTextDialogText:"Display Text:",linkOpenInDialogText:"Open In:",linkTargetNewWindowDialogText:"New Window",linkTargetSameWindowDialogText:"Same Window",linkTargetParentWindowDialogText:"Parent Window",linkTargetTopmostWindowDialogText:"Topmost Window",applyButtonTitle:"Apply",cancelButtonTitle:"Cancel",collapseButtonTitle:"Collapse",fontNames:{win:[{text:"Times New Roman",value:"Times New Roman"},{text:"Arial",value:"Arial"},{text:"Arial Black",value:"Arial Black"},{text:"Helvetica",value:"Helvetica"},{text:"Comic Sans MS",value:"Comic Sans MS"},{text:"Courier New",value:"Courier New"},{text:"Georgia",value:"Georgia"},{text:"Impact",value:"Impact"},{text:"Lucida Console",value:"Lucida Console"},{text:"Lucida Sans Unicode",value:"Lucida Sans Unicode"},{text:"Palatino Linotype",value:"Palatino Linotype"},{text:"Tahoma",value:"Tahoma"},{text:"Trebuchet MS",value:"Trebuchet MS"},{text:"Verdana",value:"Verdana"},{text:"Symbol",value:"Symbol"},{text:"Webdings",value:"Webdings"},{text:"Wingdings",value:"Wingdings"},{text:"MS Sans Serif",value:"MS Sans Serif"},{text:"MS Serif",value:"MS Serif"}],mac:[{text:"Times New Roman",value:"Times New Roman"},{text:"Arial",value:"Arial"},{text:"Arial Black",value:"Arial Black"},{text:"Helvetica",value:"Helvetica"},{text:"Comic Sans MS",value:"Comic Sans MS"},{text:"Courier New",value:"Courier New"},{text:"Georgia",value:"Georgia"},{text:"Impact",value:"Impact"},{text:"Monaco",value:"Monaco"},{text:"Lucida Grande",value:"Lucida Grande"},{text:"Book Antiqua",value:"Book Antiqua"},{text:"Geneva",value:"Geneva"},{text:"Trebuchet MS",value:"Trebuchet"},{text:"Verdana",value:"Verdana"},{text:"Symbol",value:"Symbol"},{text:"Webdings",value:"Webdings"},{text:"Zapf Dingbats",value:"Zapf Dingbats"},{text:"New York",value:"New York"}]},fontSizes:[{text:"1",value:"1 (8pt)",style:"xx-small"},{text:"2",value:"2 (9pt)",style:"x-small"},{text:"3",value:"3 (10pt)",style:"small"},{text:"4",value:"4 (12pt)",style:"medium"},{text:"5",value:"5 (14pt)",style:"large"},{text:"6",value:"6 (16pt)",style:"x-large"},{text:"7",value:"7 (18pt)",style:"xx-large"}],formatsList:[{text:"h1",value:"Heading 1"},{text:"h2",value:"Heading 2"},{text:"h3",value:"Heading 3"},{text:"h4",value:"Heading 4"},{text:"h5",value:"Heading 5"},{text:"h6",value:"Heading 6"}]}});
/*
 * Infragistics.Web.ClientUI HtmlEditor 12.1.20121.1010
 *
 * Copyright (c) 2011-2012 Infragistics Inc.
 * <Licensing info>
 *
 * http://www.infragistics.com/
 *
 * Depends on:
 *   jquery-1.4.4.js
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 *   ig.ui.shared.js
 *   ig.dataSource.js
 *   ig.ui.combo.js
 *   ig.ui.dialog.js
 *   ig.util.js
 *   ig.ui.htmleditor-en.js
 */
}if(typeof(jQuery)==="undefined"){throw new Error("jQuery is undefined")}(function(a){a.widget("ui.igHtmlEditor",{options:{showFormattingToolbar:true,showTextToolbar:true,showInsertObjectToolbar:true,showCopyPasteToolbar:true,width:725,height:350,toolbarSettings:[],customToolbars:[],inputName:"",value:""},events:{rendered:"rendered",rendering:"rendering",actionExecuting:"actionExecuting",actionExecuted:"actionExecuted",toolbarCollapsing:"toolbarCollapsing",toolbarCollapsed:"toolbarCollapsed",toolbarExpanding:"toolbarExpanding",toolbarExpanded:"toolbarExpanded",cut:"cut",copy:"copy",paste:"paste",undo:"undo",redo:"redo"},css:{htmlEditor:"ui-widget ui-widget-content ui-corner-all ui-ightmleditor ui-helper-clearfix",htmlEditorContent:"ui-ightmleditor-content",toolbarsConteiner:"ui-igtoolbars-holder",pathFinder:"ui-igPathFinder",workspaceIframe:"ui-widget-content"},defaultToolbars:[{name:"textToolbar",expanded:true,collapseButtonIcon:"ui-igbutton-collapse",expandButtonIcon:"ui-igbutton-expand",items:[{name:"Bold",type:"button",scope:null,props:{allowToggling:{value:true},isBold:{value:false,action:"_isSelectedAction"},boldButtonTooltip:{value:a.ig.HtmlEditor.locale.boldButtonTitle,action:"_tooltipAction"},boldButtonIcon:{value:"ui-igbutton-bold",action:"_buttonIconAction"}}},{name:"Italic",type:"button",props:{isItalic:{value:false,action:"_isSelectedAction"},italicButtonTooltip:{value:a.ig.HtmlEditor.locale.italicButtonTitle,action:"_tooltipAction"},italicButtonIcon:{value:"ui-igbutton-italic",action:"_buttonIconAction"}}},{name:"Underline",type:"button",props:{isUnderline:{value:false,action:"_isSelectedAction"},underlineButtonTooltip:{value:a.ig.HtmlEditor.locale.underlineButtonTitle,action:"_tooltipAction"},underlineButtonIcon:{value:"ui-igbutton-underline",action:"_buttonIconAction"}}},{name:"Strikethrough",type:"button",props:{isStrikethrough:{value:false,action:"_isSelectedAction"},strikethroughButtonTooltip:{value:a.ig.HtmlEditor.locale.strikethroughButtonTitle,action:"_tooltipAction"},strikethroughButtonIcon:{value:"ui-igbutton-strikethrough",action:"_buttonIconAction"}}},{name:"increasefontsize",type:"button",handler:"_increaseFontSize",props:{allowToggling:{value:false},isIncreaseFont:{value:false,action:"_isSelectedAction"},increaseFontButtonTooltip:{value:a.ig.HtmlEditor.locale.increaseFontSizeButtonTitle,action:"_tooltipAction"},increaseFontButtonIcon:{value:"ui-igbutton-increasefontsize",action:"_buttonIconAction"}}},{name:"decreasefontsize",type:"button",handler:"_decreaseFontSize",props:{allowToggling:{value:false},isDecreaseFont:{value:false,action:"_isSelectedAction"},decreaseFontButtonTooltip:{value:a.ig.HtmlEditor.locale.decreaseFontSizeButtonTitle,action:"_tooltipAction"},decreaseFontButtonIcon:{value:"ui-igbutton-decreasefontsize",action:"_buttonIconAction"}}},{name:"fontFamily",type:"combo",scope:null,handler:"_fontNamePlg",props:{fontFamilyComboWidth:{value:135,action:"_comboWidthAction"},fontFamilyComboHeight:{value:"",action:"_comboHeightAction"},fontFamilies:{value:a.ig.HtmlEditor.locale.fontNames[/^win/gi.test(navigator.platform)?"win":"mac"],action:"_comboDataSourceAction"},selectedFontFamily:{value:"Times New Roman",action:"_comboSelectedItem"}}},{type:"combo",name:"fontSize",scope:null,handler:"_fontSizePlg",props:{fontSizeComboWidth:{value:75,action:"_comboWidthAction"},fontSizeComboHeight:{value:"",action:"_comboHeightAction"},fontSizes:{value:a.ig.HtmlEditor.locale.fontSizes,action:"_comboDataSourceAction"},selectedFontSize:{value:"1",action:"_comboSelectedItem"},fontSizeItemsListWidth:{value:115,action:"_comboDropDownListWidth"}}},{type:"combo",name:"formatsList",scope:null,handler:"_formatsListPlg",props:{formatsListComboWidth:{value:120,action:"_comboWidthAction"},formatsListComboHeight:{value:"",action:"_comboHeightAction"},formatsList:{value:a.ig.HtmlEditor.locale.formatsList,action:"_comboDataSourceAction"},selectedFormat:{value:"h1",action:"_comboSelectedItem"}}}]},{name:"formattingToolbar",expanded:true,collapseButtonIcon:"ui-igbutton-collapse",expandButtonIcon:"ui-igbutton-expand",items:[{name:"justifyleft",type:"button",props:{isJustifyleft:{value:false,action:"_isSelectedAction"},justifyleftButtonTooltip:{value:a.ig.HtmlEditor.locale.alignTextLeftButtonTitle,action:"_tooltipAction"},justifyleftButtonIcon:{value:"ui-igbutton-justifyleft",action:"_buttonIconAction"}}},{name:"justifycenter",type:"button",props:{isJustifycenter:{value:false,action:"_isSelectedAction"},justifycenterButtonTooltip:{value:a.ig.HtmlEditor.locale.alignTextCenterButtonTitle,action:"_tooltipAction"},justifycenterButtonIcon:{value:"ui-igbutton-justifycenter",action:"_buttonIconAction"}}},{name:"justifyright",type:"button",props:{isJustifyright:{value:false,action:"_isSelectedAction"},justifyrightButtonTooltip:{value:a.ig.HtmlEditor.locale.alignTextRightButtonTitle,action:"_tooltipAction"},justifyrightButtonIcon:{value:"ui-igbutton-justifyright",action:"_buttonIconAction"}}},{name:"justifyfull",type:"button",props:{isJustifyfull:{value:false,action:"_isSelectedAction"},justifyfullButtonTooltip:{value:a.ig.HtmlEditor.locale.justifyButtonTitle,action:"_tooltipAction"},justifyfullButtonIcon:{value:"ui-igbutton-justifyfull",action:"_buttonIconAction"}}},{name:"bullets",type:"splitButton",props:{items:{value:[{name:"InsertUnorderedList",label:a.ig.HtmlEditor.locale.bulletsButtonTitle,icon:"ui-igbutton-unorderedlist"},{name:"InsertOrderedList",label:a.ig.HtmlEditor.locale.numberingButtonTitle,icon:"ui-igbutton-orderedlist"}]},defaultItemName:{value:"InsertUnorderedList"}}},{name:"indents",type:"splitButton",props:{items:{value:[{name:"indent",label:a.ig.HtmlEditor.locale.increaseIndentButtonTitle,icon:"ui-igbutton-indent"},{name:"outdent",label:a.ig.HtmlEditor.locale.decreaseIndentButtonTitle,icon:"ui-igbutton-removeindent"}]},defaultItemName:{value:"indent"}}},{name:"textColor",type:"splitButtonColor",handler:"_fontColorPlg",props:{items:{value:[{name:"textColor",label:a.ig.HtmlEditor.locale.fontColorButtonTitle,icon:"ui-igbutton-forecolor"}]},defaultItemName:{value:"textColor"},selectedTextColor:{value:"red",action:"_spltButtonColorAction"}}},{name:"backgroundTextColor",type:"splitButtonColor",handler:"_fontBackgroundColorPlg",props:{items:{value:[{name:"backgroundTextColor",label:a.ig.HtmlEditor.locale.textHighlightButtonTitle,icon:"ui-igbutton-backcolor"}]},defaultItemName:{value:"backgroundTextColor"},selectedTextBackgroundColor:{value:"",action:"_spltButtonColorAction"}}}]},{name:"insertObjectToolbar",expanded:true,collapseButtonIcon:"ui-igbutton-collapse",expandButtonIcon:"ui-igbutton-expand",items:[{name:"image",type:"button",handler:"_insertImageDialogPlg",props:{isImage:{value:false,action:"_isSelectedAction"},imageButtonTooltip:{value:a.ig.HtmlEditor.locale.insertPictureButtonTitle,action:"_tooltipAction"},imageButtonIcon:{value:"ui-igbutton-addimage",action:"_buttonIconAction"}}},{name:"link",type:"button",handler:"_insertLinkPlg",props:{isLink:{value:false,action:"_isSelectedAction"},linkButtonTooltip:{value:a.ig.HtmlEditor.locale.insertLinkButtonTitle,action:"_tooltipAction"},linkButtonIcon:{value:"ui-igbutton-addlink",action:"_buttonIconAction"}}},{name:"table",type:"button",handler:"_insertTablePlg",props:{isTable:{value:false,action:"_isSelectedAction"},tableButtonTooltip:{value:a.ig.HtmlEditor.locale.insertTableButtonTitle,action:"_tooltipAction"},tableButtonIcon:{value:"ui-igbutton-table",action:"_buttonIconAction"}}},{name:"addRow",type:"button",handler:"_addTableRowPlg",props:{allowToggling:{value:false},isAddRow:{value:false,action:"_isSelectedAction"},addRowButtonTooltip:{value:a.ig.HtmlEditor.locale.addRowButtonTitle,action:"_tooltipAction"},addRowButtonIcon:{value:"ui-igbutton-addrow",action:"_buttonIconAction"}}},{name:"addColumn",type:"button",handler:"_addTableColumnPlg",props:{allowToggling:{value:false},isAddColumn:{value:false,action:"_isSelectedAction"},addColumnButtonTooltip:{value:a.ig.HtmlEditor.locale.addColumnButtonTitle,action:"_tooltipAction"},addColumnButtonIcon:{value:"ui-igbutton-addcolumn",action:"_buttonIconAction"}}},{name:"removeRow",type:"button",handler:"_removeTableRowPlg",props:{allowToggling:{value:false},isRemoveRow:{value:false,action:"_isSelectedAction"},removeRowButtonTooltip:{value:a.ig.HtmlEditor.locale.removeRowButtonTitle,action:"_tooltipAction"},removeRowButtonIcon:{value:"ui-igbutton-removerow",action:"_buttonIconAction"}}},{name:"removeColumn",type:"button",handler:"_removeTableColumnPlg",props:{allowToggling:{value:false},isRemoveColumn:{value:false,action:"_isSelectedAction"},removeColumnButtonTooltip:{value:a.ig.HtmlEditor.locale.removeColumnButtonTitle,action:"_tooltipAction"},removeColumnButtonIcon:{value:"ui-igbutton-removecolumn",action:"_buttonIconAction"}}}]},{name:"copyPasteToolbar",expanded:true,collapseButtonIcon:"ui-igbutton-collapse",expandButtonIcon:"ui-igbutton-expand",items:[{name:"copy",type:"button",scope:null,props:{isCopy:{value:false,action:"_isSelectedAction"},copyButtonTooltip:{value:a.ig.HtmlEditor.locale.copyButtonTitle,action:"_tooltipAction"},copyButtonIcon:{value:"ui-igbutton-copy",action:"_buttonIconAction"}}},{name:"cut",type:"button",scope:null,props:{isCut:{value:false,action:"_isSelectedAction"},cutButtonTooltip:{value:a.ig.HtmlEditor.locale.cutButtonTitle,action:"_tooltipAction"},cutButtonIcon:{value:"ui-igbutton-cut",action:"_buttonIconAction"}}},{name:"paste",type:"button",scope:null,props:{isPaste:{value:false,action:"_isSelectedAction"},pasteButtonTooltip:{value:a.ig.HtmlEditor.locale.pasteButtonTitle,action:"_tooltipAction"},pasteButtonIcon:{value:"ui-igbutton-paste",action:"_buttonIconAction"}}},{name:"undo",type:"button",scope:null,props:{allowToggling:{value:false},isUndo:{value:false,action:"_isSelectedAction"},undoButtonTooltip:{value:a.ig.HtmlEditor.locale.undoButtonTitle,action:"_tooltipAction"},undoButtonIcon:{value:"ui-igbutton-undo",action:"_buttonIconAction"}}},{name:"redo",type:"button",scope:null,props:{allowToggling:{value:false},isRedo:{value:false,action:"_isSelectedAction"},redoButtonTooltip:{value:a.ig.HtmlEditor.locale.redoButtonTitle,action:"_tooltipAction"},redoButtonIcon:{value:"ui-igbutton-redo",action:"_buttonIconAction"}}}]}],NODE:new a.ig.XmlNodeType(),_toolbarsActiveState:{},_toolbarItemsDescriptors:{button:a.ig.igToolbarButtonDescriptor,"0":a.ig.igToolbarButtonDescriptor,combo:a.ig.igToolbarComboDescriptor,"1":a.ig.igToolbarComboDescriptor,splitButton:a.ig.igToolbarSplitButtonDescriptor,"2":a.ig.igToolbarSplitButtonDescriptor,splitButtonColor:a.ig.igToolbarSplitButtonDescriptor,"3":a.ig.igToolbarSplitButtonDescriptor,custom:a.ig.igToolbarItemBaseDescriptor},_isDirty:false,_createWidget:function(){this._allToolbars=[];a.Widget.prototype._createWidget.apply(this,arguments)},_id:function(h){return this.element[0].id+h},widget:function(){return this.element},_render:function(){var h="",i=this.options.inputName||"source";this.element.addClass(this.css.htmlEditor);h+='	<div id="'+this._id("_toolbars")+'" class="'+this.css.toolbarsConteiner+'"></div>';h+='	<div id="'+this._id("_content")+'" class="'+this.css.htmlEditorContent+'">';h+='		<iframe class="'+this.css.workspaceIframe+'" id="'+this._id("_editor")+'" height="'+this.options.height+'"></iframe>';h+='		<textarea name="'+i+'" id="'+this._id("_source")+'"></textarea>';h+="	</div>";a(h).appendTo(this.element);this.element.width(this.options.width)},_createWorkspace:function(){var h='<!DOCTYPE ><html><head xmlns="http://www.w3.org/1999/xhtml"><title>igHtmlEditor</title></head><body contentEditable="true"><p>';if(!document.all){h+="<br>"}h+="</p></body></html>";this.workspace=this.element.find("#"+this._id("_editor"))[0];this.workspace.contentWindow.document.open("text/html","replace");this.workspace.contentWindow.document.write(h);this.workspace.contentWindow.document.close();if(a.browser.webkit){this.workspace.contentWindow.document.body.contentEditable=true}if(!document.all){this.workspace.contentWindow.document.execCommand("styleWithCSS",false,true)}},_getToolbar:function(h){if(!isNaN(parseInt(h,10))){return this._toolbars.eq(h)}if(typeof h==="string"){return this._toolbars.find("#"+this._id("_toolbars_"+h))}},_getFirefoxVersion:function(){if(a.browser.mozilla){return parseInt(window.navigator.userAgent.match(/\bFirefox\/[0-9\.]+\b/)[0].split("/").reverse()[0],10)}},_create:function(){var h=this._trigger(this.events.rendering,null,{owner:this});this._allToolbars=a.extend(true,[],this.defaultToolbars.concat(this.options.customToolbars));this._initToolabrs();this._setActiveToolbars();if(h){this._render();this._createToolbars();this._createWorkspace();this._domPathToolbar();this._trigger(this.events.rendered,null)}},_init:function(){this._bindToToolbarEvents();this._bindWorkspaceEvents();this.sourceWindow=this.element.find("#"+this._id("_source")).height(this.options.height);this._initFontsCombos();this._initFormatsListCombo();this._initFontSizeCombo();this._analyser=new a.ig.ToolbarHelper(this.workspace.contentWindow,this._toolbars.children());var h=this;this._onSelectionChange(function(){h._initialWorkspaceFormatting()})},_initFontsCombos:function(){var h=this._getToolbar("textToolbar").igToolbar("getItem","fontFamily").addClass("ui-combo-fontfamily");h.igCombo("option",{itemTemplate:'<span style="font-family: ${value}">${text}</span>'})},_initFormatsListCombo:function(){var h=this._getToolbar("textToolbar").igToolbar("getItem","formatsList");h.igCombo("option","itemTemplate","<${text}>${value}</${text}>")},_initFontSizeCombo:function(){var h=this._getToolbar("textToolbar").igToolbar("getItem","fontSize");h.igCombo("option",{itemTemplate:'<span style="font-size: ${style}; line-height: ${style}">${value}</span>'})},_setOption:function(h,k){var i=this,j=[];if(h===undefined||k===undefined){return}if(h==="toolbarSettings"){a.each(k,function(l,m){a.each(m,function(n,o){if(n!=="name"){i._tbHash[m.name][n].updateProperty(n,o);j.push(i._tbHash[m.name][n])}});i._getToolbar(i._allToolbars[l].name).igToolbar("option","items",j)})}else{if(this._toolbarsActiveState[h]){this._showToolbar(this._toolbarsActiveState[h].name,k)}else{if(h==="width"){this.element.width(k)}else{if(h==="height"){this.element.find("#"+this._id("_editor")).height(k)}}}}a.Widget.prototype._setOption.apply(this,arguments)},_showToolbar:function(h,i){if(i){this._getToolbar(h).show()}else{this._getToolbar(h).hide()}},_setActiveToolbars:function(){var i=this,h=this.options;a.each(h,function(j,k){if(i._toolbarsActiveState[j]){i._toolbarsActiveState[j].value=k;h[j]=k}})},_initToolabrs:function(){var n=this.options,r,k,l,h,m,s,q,p;this._wrappedToolbars=[];this._tbHash={};for(h=0;h<this._allToolbars.length;h++){r=this._allToolbars[h];this._tbHash[r.name]={toolbarOpts:r};this._tbHash[r.name].expanded=false;this._wrappedToolbars[h]=r;for(m=0;m<r.items.length;m++){k=r.items[m];if(!k.type){k.type="custom"}l=this._wrappedToolbars[h].items[m]=this._getToolbarItemDescriptor(k);for(p in l.getProperties()){if(l.getProperties().hasOwnProperty(p)){if(this._tbHash[r.name]===undefined){this._tbHash[r.name]={}}this._tbHash[r.name][p]=l}}}q=a.camelCase("show-"+r.name);this._toolbarsActiveState[q]={name:r.name,value:true}}for(h=0;h<n.toolbarSettings.length;h++){r=n.toolbarSettings[h];for(p in r){if(r.hasOwnProperty(p)){s=r.name;if(this._tbHash[s].toolbarOpts[p]!==undefined&&p!=="name"){this._tbHash[s].toolbarOpts[p]=r[p];continue}if(this._tbHash[s][p]===undefined||this._tbHash[s]===undefined){continue}this._tbHash[s][p].getProperty(p).value=r[p]}}}},_getToolbarItemDescriptor:function(h){return new this._toolbarItemsDescriptors[h.type](h)},_createToolbars:function(){var h,j;this._toolbars=this.element.find("#"+this._id("_toolbars"));for(h=0;h<this._wrappedToolbars.length;h++){j=a('<span id="'+this._id("_toolbars")+"_"+this._wrappedToolbars[h].name+'"></span>').appendTo(this._toolbars).igToolbar(this._wrappedToolbars[h]);if(!this._isToolbarActive(this._wrappedToolbars[h].name)){j.hide()}}},_initialWorkspaceFormatting:function(){var k=this.options,j,m,l,h={isBold:"bold",isItalic:"italic",isUnderline:"underline",isStrikethrough:"strikethrough"};for(j=0;j<k.toolbarSettings.length;j++){m=k.toolbarSettings[j];for(l in m){if(m.hasOwnProperty(l)&&h.hasOwnProperty(l)){this._execCommand(h[l])}}}},_isToolbarActive:function(i){var h;for(h in this._toolbarsActiveState){if(this._toolbarsActiveState.hasOwnProperty(h)){if(this._toolbarsActiveState[h].name===i){return this._toolbarsActiveState[h].value}}}},_execCommand:function(i,h){this._selectionWrapperSaved.focus();this._selectionWrapperSaved.execCommand(i.toLowerCase(),h);this._onSelectionChange()},_bindToToolbarEvents:function(){var j=this,i="igtoolbartoolbarbuttonclick igtoolbartoolbarcomboselected igtoolbartoolbarcustomitemclick igtoolbarcollapsing igtoolbarcollapsed igtoolbarexpanding igtoolbarexpanded",k={igtoolbarcollapsing:this.events.toolbarCollapsing,igtoolbarcollapsed:this.events.toolbarCollapsed,igtoolbarexpanding:this.events.toolbarExpanding,igtoolbarexpanded:this.events.toolbarExpanded};this._toolbars.delegate(":ui-igToolbar",i,function h(l,p){var o=p.scope,m=p.handler,n;delete p.scope;delete p.handler;if(k.hasOwnProperty(l.type)){j._trigger(k[l.type],l,p);return}p.selectedItem=j._selectionWrapperSaved&&j._selectionWrapperSaved.getSelectedItem();n=j._trigger(j.events.actionExecuting,l,{owner:j,toolbar:p.toolbarName,actionName:p.name});if(n){if(!m&&!o){j._execCommand(p.name,p.value)}else{if(m&&!o){j[m](j.workspace.contentWindow.document,p)}else{if(m&&o){m.call(p.scope,j.workspace.contentWindow.document,p)}}}j._trigger(j.events.actionExecuted,l,{owner:a(l.originalEvent.target),toolbar:p.toolbarName,actionName:p.name});l.stopImmediatePropagation()}})},_bindWorkspaceEvents:function(){var i=this,j=a(this.workspace).contents().find("body"),h={webKitIE:{CTRLZ:122,CTRLY:121},moz:{CTRLZ:26,CTRLY:25}};a(this.workspace.contentWindow.document).find("html").live("click",function(k){var l=a(k.target);if(l.is("html")){i.workspace.contentWindow.document.body.focus()}i.sourceWindow.val(j.html());i._isDirty=true;i.element.find(":ui-igColorPickerSplitButton").igColorPickerSplitButton("collapse");k.stopPropagation()}).live("mouseup",function(k){i._onSelectionChange()});a(this.workspace.contentWindow.document).bind("keypress",function(k){i.sourceWindow.val(j.html());i._isDirty=true;if(k.ctrlKey&&(k.which===h.webKitIE.CTRLZ||k.which===h.moz.CTRLZ)){i._trigger(i.events.undo,k,{owner:i})}if(k.ctrlKey&&(k.which===h.webKitIE.CTRLY||k.which===h.moz.CTRLY)){i._trigger(i.events.redo,k,{owner:i})}i._onSelectionChange()});a(this.workspace.contentWindow.document).bind("cut copy paste",function(k){i._trigger(k.type,k,{owner:i})});this.element.bind("ightmleditoractionexecuted",function(k,l){if(l.actionName.toLowerCase()===i.events.undo||l.actionName.toLowerCase()===i.events.redo){i._trigger(l.actionName.toLowerCase(),k,{owner:i});k.stopImmediatePropagation()}})},_viewSource:function(){var h=a(this.workspace),i=h.contents().find("body");if(h.is(":visible")){this.sourceWindow.val(i.html());h.hide();this.sourceWindow.show()}else{i.html(this.sourceWindow.val());h.show();this.sourceWindow.hide()}},_viewSourcePlg:function(h){this._viewSource()},_insertImageDialogPlg:function(k,i){var h=a("<img>",this.workspace.contentWindow.document),j=this;if(i.selectedItem.is("img")){h=i.selectedItem}this._imageDialog=a("#"+this._id("_imageDialog"));if(!this._imageDialog.length){this._imageDialog=a('<div id="'+this._id("_imageDialog")+'"></div>').appendTo(this.element).igImagePropertiesDialog({image:h,target:i.toolbarItem,applyform:function(l,m){j._selectionWrapperSaved.focus();j._selectionWrapperSaved.replaceNode(m.image)}})}else{this._imageDialog.igImagePropertiesDialog("show",h)}},_insertLinkPlg:function(m,l){var k=this._selectionWrapperSaved,i=k.getSelectedItem(),j=i[0].nodeType,h=a("<a></a>",this.workspace.contentWindow.document);if(i.parent().is("a")){h=i.parent()}else{if((j===this.NODE._Text)||(j===this.NODE._Element)){h.html(k.getSelectionAsText())}}if(!this._insertLinkDialog){this._insertLinkDialog=a('<div id="'+this._id("_linkDialog")+'"></div>').appendTo(this.element).igLinkPropertiesDialog({anchor:h,target:l.toolbarItem,applyform:function(n,o){k.replaceNode(o.anchor)}})}else{this._insertLinkDialog.igLinkPropertiesDialog("show",h)}},_increaseFontSize:function(){this._selectionWrapperSaved.focus();this._execCommand("increasefontsize");this._onSelectionChange()},_decreaseFontSize:function(){this._selectionWrapperSaved.focus();this._execCommand("decreasefontsize");this._onSelectionChange()},_fontNamePlg:function(i,h){this._execCommand("fontname",h.value)},_fontSizePlg:function(i,h){this._execCommand("fontsize",h.value)},_formatsListPlg:function(i,h){this._execCommand("formatBlock","<"+h.value+">")},_insertTablePlg:function(k,h){var j=a("<table></table>",this.workspace.contentWindow.document),i=this;if(h.selectedItem.is("table")){j=h.selectedItem}if(!this.insertTableDialog){this.insertTableDialog=a("<div></div>").appendTo(this.element).igTablePropertiesDialog({table:j,target:h.toolbarItem,applyform:function(l,m){i._selectionWrapperSaved.insertTable(m.table)}});return}if(this.insertTableDialog.igTablePropertiesDialog("option","isHidden")){this.insertTableDialog.igTablePropertiesDialog("show",j);return}if(!this.insertTableDialog.igTablePropertiesDialog("option","isHidden")){this.insertTableDialog.igTablePropertiesDialog("hide")}},_addTableRowPlg:function(){var h=this._selectionWrapperSaved.getSelectedItem();if(h.is("table")){h.tableManipulator("addRow")}else{if(h.is("td")){h.parents("table").tableManipulator("addRow",h.parent().index())}}},_removeTableRowPlg:function(){var h=this._selectionWrapperSaved.getSelectedItem();if(h.is("table")){h.tableManipulator("removeRow")}else{if(h.is("td")){h.parents("table").tableManipulator("removeRow",h.parent().index())}}},_addTableColumnPlg:function(){var h=this._selectionWrapperSaved.getSelectedItem();if(h.is("table")){h.tableManipulator("addColumn")}else{if(h.is("td")){h.parents("table").tableManipulator("addColumn",h.index())}}},_removeTableColumnPlg:function(){var h=this._selectionWrapperSaved.getSelectedItem();if(h.is("table")){h.tableManipulator("removeColumn")}else{if(h.is("td")){h.parents("table").tableManipulator("removeColumn",h.index())}}},_fontColorPlg:function(i,h){this._execCommand("forecolor",h.value)},_fontBackgroundColorPlg:function(j,i){var h=this._getFirefoxVersion()?"hilitecolor":"backcolor";this._execCommand(h,i.value)},_domPathToolbar:function(){var h=this;this._viewSourceBtn=a('<div class="ui-igbutton-viewsource"></div>').appendTo(this.element).igButton({labelText:"&nbsp;",title:a.ig.HtmlEditor.locale.viewSourceButtonTitle,icons:{primary:"ui-igbutton-viewsource-icon"},onlyIcons:true,click:function(){h._viewSourcePlg();if(h._domPathToolbar.igPathFinder("option","disabled")){h._domPathToolbar.igPathFinder("option","disabled",false)}else{h._domPathToolbar.igPathFinder("option","disabled",true)}}});this._domPathToolbar=a('<div id="'+this._id("_domPathToolbar")+'" style="display: inline-block"></div>').appendTo(this.element).igPathFinder({click:function(i,k){var j=h._selectionWrapperSaved;h.workspace.contentWindow.document.body.focus();if(h._domPathToolbar.igPathFinder("option","disabled")){return}i.preventDefault();if(k.item.is("html")){j.select(k.item.children("body").contents())}else{if(k.item.is("body")){j.select(k.item.contents())}else{j.select(k.item)}}}})},_cutPlg:function(){this._execCommand("cut")},_copyPlg:function(){this._execCommand("copy")},_pastePlg:function(){this._execCommand("paste")},_onSelectionChange:function(h){var k=this,j,i=h||function(){k._selectionWrapperSaved.focus();var l=this.getSelectedItem();if(l[0].nodeType===k.NODE._Text){l=l.parent()}k._analyser.analyse(l);if(l.length){k._domPathToolbar.igPathFinder("option","items",a.merge(l,l.parents()))}};j=new a.ig.SelectionWrapper(this.workspace.contentWindow,function(){k._selectionWrapperSaved=this;i.call(this)})},getContent:function(h){if(h==="text"){return a(this.workspace).contents().find("body").text()}if(h==="html"){return a(this.workspace).contents().find("body").html()}},setContent:function(h,i){if(i==="text"){a(this.workspace).contents().find("body").text(h)}else{if(i==="html"){a(this.workspace).contents().find("body").html(h)}}this.sourceWindow.val(h)},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);a(this.workspace.contentWindow).undelegate();this.element.removeClass(this.css.htmlEditor).find("#"+this._id("_content")).removeClass(this.css.htmlEditorContent).end().find("#"+this._id("_domPathToolbar")).removeClass(this.css.pathFinder).end().find("#"+this._id("_toolbars")).removeClass(this.css.toolbarsConteiner).end().find(":ui-igToolbar").igToolbar("destroy").end().empty();this._viewSourceBtn.igButton("destroy")},executeAction:function(h,i){this._selectionWrapperSaved.focus();this._selectionWrapperSaved.select();this._selectionWrapperSaved.execCommand(h.toLowerCase(),i);this._onSelectionChange()},isDirty:function(){return this._isDirty}});a.widget("ui.igPathFinder",{options:{items:null},css:{button:"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-igbutton ui-widget-content",buttonLabel:"ui-button-text"},_create:function(){this._addStyles()},_addStyles:function(){this.element.addClass("ui-igPathFinder")},_setOption:function(h,i){a.Widget.prototype._setOption.apply(this,arguments);switch(h){case"items":this._updateToolbar();break}},_updateToolbar:function(){var m=this,j=this.options,l=[],k,i="",h;if(j.items.length){j.items.each(function(o,n){i='<button aria-disabled="false" role="button" class="'+m.css.button+'">	<span class="'+m.css.buttonLabel+'">'+n.nodeName+"	</span></button>";l.push(i)});k=a(j.items.toArray().reverse());h=a(l.reverse().join("<span> &gt; </span>")).appendTo(this.element.empty()).filter("button");h.mouseover(function(n){a(this).addClass("ui-state-hover")}).mouseleave(function(n){a(this).removeClass("ui-state-hover")}).click(function(n){a(this).siblings(".ui-state-active").removeClass("ui-state-active");a(this).addClass("ui-state-active");m._trigger("click",n,{item:k.eq(h.index(this))})})}}});a.widget("ui.igLinkPropertiesDialog",{options:{anchor:null,target:null,isHidden:true},css:{igLinkPropertiesDialogContent:"ui-igdialog-content",igLinkPropertiesDialog:"ui-ightmleditor-dialog"},events:{apply:"applyform",cancel:"cancelform"},_id:function(h){return this.element[0].id+h},_create:function(){this.element.igPopover({closeOnBlur:false,position:"balanced",direction:"auto",renderCloseButton:false,target:this.options.target});this.poContent=this.element.igPopover("container");this._createForm()},_init:function(){var h=this.options;this._anchor=h.anchor;this.poContent.addClass(this.css.igLinkPropertiesDialog);this._anchor=this.options.anchor;this._attachFormEvents();this.show(this._anchor)},_setOption:function(h,j){var i=this.options;a.Widget.prototype._setOption.apply(this,arguments);switch(h){case"visible":this.element.igDialog("option","visible",i.visible);break;case"selectedItem":this._dataBind(j);break}},_txtUrl:"",_cbTarget:"",_attachFormEvents:function(){var h=this;this.poContent.find("#"+this._id("_cmbOpenIn")).igCombo({selectedItems:[{index:0}],enableClearButton:false,width:155});this.poContent.find("#"+this._id("_btnCancel")).igButton({click:function(){h.hide()}});this.poContent.find("#"+this._id("_btnApply")).igButton({click:function(i){i.stopImmediatePropagation();h._anchor.attr({href:h._txtUrl.val(),target:h._cbTarget.val()}).html(h._displayText.val());h._trigger("applyform",i,{anchor:h._anchor});h.hide()}});this.poContent.bind("keypress",function(i){if(i.keyCode===a.ui.keyCode.ESCAPE){h.hide()}});this.element.bind("igpopoverpopovershown",function(i){h.poContent.find("#"+h._id("_linkHref")).focus()})},_createForm:function(){var h;h+='<div class="'+this.css.igLinkPropertiesDialogContent+'">';h+="	<div>";h+='		<ol class="layoutList">';h+="			<li>";h+='				<label for="'+this._id("_linkHref")+'">'+a.ig.HtmlEditor.locale.linkNavigateToUrlDialogText+"</label>";h+='				<input autocomplete="off" id="'+this._id("_linkHref")+'" name="href" type="text" value="" />';h+="			</li>";h+="			<li>";h+='				<label for="'+this._id("_linkDisplayText")+'">'+a.ig.HtmlEditor.locale.linkDisplayTextDialogText+"</label>";h+='				<input autocomplete="off" id="'+this._id("_linkDisplayText")+'" name="href" type="text" value="" />';h+="			</li>";h+="			<li>";h+='				<label for="'+this._id("_cmbOpenIn")+'">'+a.ig.HtmlEditor.locale.linkOpenInDialogText+"</label>";h+='				<select id="'+this._id("_cmbOpenIn")+'" name="target">';h+='					<option value="_blank">'+a.ig.HtmlEditor.locale.linkTargetNewWindowDialogText+"</option>";h+='					<option value="_self">'+a.ig.HtmlEditor.locale.linkTargetSameWindowDialogText+"</option>";h+='					<option value="_parent">'+a.ig.HtmlEditor.locale.linkTargetParentWindowDialogText+"</option>";h+='					<option value="_top">'+a.ig.HtmlEditor.locale.linkTargetTopmostWindowDialogText+"</option>";h+="				</select>";h+="			</li>";h+='			<li style="text-align:right">';h+='				<button aria-disabled="false" id="'+this._id("_btnApply")+'" name="insertLink" role="button" title="'+a.ig.HtmlEditor.locale.applyButtonTitle+'" type="button">'+a.ig.HtmlEditor.locale.applyButtonTitle+"</button>";h+='				<button aria-disabled="false" id="'+this._id("_btnCancel")+'" role="button" title="'+a.ig.HtmlEditor.locale.cancelButtonTitle+'" type="button">'+a.ig.HtmlEditor.locale.cancelButtonTitle+"</button>";h+="			</li>";h+="		</ol>";h+="	</div>";h+="</div>";a(h).appendTo(this.poContent)},_dataBind:function(h){this._txtUrl=this.poContent.find("#"+this._id("_linkHref")).val(h.attr("href"));this._cbTarget=this.poContent.find("#"+this._id("_cmbOpenIn")).val(h.attr("target"));this._displayText=this.poContent.find("#"+this._id("_linkDisplayText")).val(h.html())},show:function(h){this._anchor=h;this._dataBind(h);this.options.isHidden=false;this.element.igPopover("show")},hide:function(){this.options.isHidden=true;this.options.target.igToolbarButton("toggle");this.element.igPopover("hide")}});a.widget("ui.igTablePropertiesDialog",{options:{table:null,isHidden:true,target:null},css:{igTablePropertiesDialogContent:"ui-igdialog-content ui-widget-content",igTablePropertiesDialog:"ui-ightmleditor-dialog"},events:{apply:"applyform",cancel:"cancelform"},_create:function(){this.element.igPopover({closeOnBlur:false,position:"balanced",direction:"auto",renderCloseButton:false,target:this.options.target});this.poContent=this.element.igPopover("container");this._createForm()},_init:function(){this.element.addClass(this.css.igTablePropertiesDialog);this.element.css({zIndex:1000,outline:"0px none"});this.rowsNumField=this.element.find("#"+this._id("_tableRows"));this.columnsNumField=this.element.find("#"+this._id("_tableColumns"));this.widthNumField=this.element.find("#"+this._id("_tableWidth"));this.heightNumField=this.element.find("#"+this._id("_tableHeight"));this._dataBind();this._attachFormEvents();this.show(this.options.table)},_id:function(h){return this.element[0].id+h},_createForm:function(){var h='<div><div><ol class="layoutList"><li></li><li><div class="ui-igtablepropertiesdialog-cols-rows-num"><input type="hidden" id="'+this._id("_tableRows")+'" name="tableRows" readonly="readonly" value=""><input type="hidden" id="'+this._id("_tableColumns")+'" name="tableColumns" readonly="readonly" value=""></div></li></ol></div></div>';a(h).appendTo(this.poContent);this._sampleTable=a('<table "'+this._id("_tableModel")+'" class="ui-igtablepropertiesdialog-sample-table"></table>').tableManipulator({rows:8,columns:6}).appendTo(this.poContent.find(".layoutList li:first"))},_attachFormEvents:function(){var k=this.poContent.find("table"),h=k.find("td").addClass("ui-state-default"),i=k.find("tr"),j=this;k.delegate("td","mouseover click",function(n){var p=a(n.target),m=p.parent().index()+1,l=a(this).index()+1,o;if(n.type==="mouseover"){h.removeClass("ui-state-hover");for(o=0;o<m;o++){a(i.get(o)).find("td:lt("+(l)+")").addClass("ui-state-hover")}j.rowsNumField.val(m);j.columnsNumField.val(l)}if(n.type==="click"){j._table.tableManipulator({rows:m,columns:l,addSpacingChar:true});j._trigger("applyform",n,{table:j._table.attr("border",1)});j.hide()}});k.bind("mouseout",function(){h.removeClass("ui-state-hover");j.rowsNumField.val(null);j.columnsNumField.val(null)})},_dataBind:function(h){this.rowsNumField.val();this.columnsNumField.val();this.widthNumField.val();this.heightNumField.val()},show:function(h){this._table=h;this.options.isHidden=false;this._dataBind(h);this.element.igPopover("show",this.options.target)},hide:function(){this.element.igPopover("hide");this.options.isHidden=true}});a.widget("ui.igImagePropertiesDialog",{options:{image:null,target:null,isHidden:true},css:{igImagePropertiesDialogContent:"ui-igdialog-content",igImagePropertiesDialog:"ui-ightmleditor-dialog"},events:{apply:"applyform",cancel:"cancelform"},_create:function(){var h=this.options;this._image=this.options.image;this.element.igPopover({closeOnBlur:true,target:h.target,renderCloseButton:false});this.poContent=this.element.igPopover("container");this._createForm()},_init:function(){this.poContent.addClass(this.css.igImagePropertiesDialog);this._imgSrcFld=this.poContent.find("#"+this._id("_imgSrc"));this._imgAltFld=this.poContent.find("#"+this._id("_imgAlt"));this._imgWidthFld=this.poContent.find("#"+this._id("_imgWidth")).igNumericEditor({minValue:0,button:"spin",maxDecimals:0});this._imgHeightFld=this.poContent.find("#"+this._id("_imgHeight")).igNumericEditor({minValue:0,button:"spin",maxDecimals:0});this._attachFormEvents();this.show(this._image)},_setOption:function(h,i){a.Widget.prototype._setOption.apply(this,arguments);switch(h){case"visible":break}},_id:function(h){return this.element[0].id+h},show:function(h){this._image=h;this.options.isHidden=false;this._dataBind(h);this.element.igPopover("show",this.options.target)},hide:function(){this.options.isHidden=true;this.element.igPopover("hide")},_createForm:function(){var h="";h+='<div class="'+this.css.igImagePropertiesDialogContent+'">';h+="	<div>";h+='		<ol class="layoutList">';h+="			<li>";h+='				<label for="'+this._id("_imgSrc")+'">'+a.ig.HtmlEditor.locale.imageUrlDialogText+"</label>";h+='				<input autocomplete="off" id="'+this._id("_imgSrc")+'" name="src" type="text" value="" />';h+="			</li>";h+="			<li>";h+='				<label for="'+this._id("_imgAlt")+'">'+a.ig.HtmlEditor.locale.imageAlternativeTextDialogText+"</label>";h+='				<input autocomplete="off" id="'+this._id("_imgAlt")+'" name="altText" type="text" value="" />';h+="			</li>";h+='			<li style="display:'+(this._image.width()?"block":"none")+';">';h+='				<label for="'+this._id("_imgWidth")+'">'+a.ig.HtmlEditor.locale.imageWidthDialogText+"</label>";h+='				<input autocomplete="off" id="'+this._id("_imgWidth")+'" name="width" type="text" value="" />';h+="			</li>";h+='			<li style="display:'+(this._image.height()?"block":"none")+';">';h+='				<label for="'+this._id("_imgHeight")+'">'+a.ig.HtmlEditor.locale.imageHeihgtDialogText+"</label>";h+='				<input autocomplete="off" id="'+this._id("_imgHeight")+'" name="height" type="text" value="" />';h+="			</li>";h+='			<li style="text-align:right">';h+='				<button aria-disabled="false" id="'+this._id("_btnApply")+'" name="insertLink" role="button" title="'+a.ig.HtmlEditor.locale.applyButtonTitle+'" type="button">'+a.ig.HtmlEditor.locale.applyButtonTitle+"</button>";h+='				<button aria-disabled="false" id="'+this._id("_btnCancel")+'" role="button" title="'+a.ig.HtmlEditor.locale.cancelButtonTitle+'" type="button">'+a.ig.HtmlEditor.locale.cancelButtonTitle+"</button>";h+="			</li>";h+="		</ol>";h+="	</div>";h+="</div>";this.poContent.append(h)},_attachFormEvents:function(){var h=this;this.poContent.find("#"+this._id("_btnApply")).igButton({click:function(i){h._image.attr({src:h._imgSrcFld.val(),alt:h._imgAltFld.val(),width:(parseInt(h._imgWidthFld.val(),10)===0)?null:h._imgWidthFld.val(),height:(parseInt(h._imgHeightFld.val(),10)===0)?null:h._imgHeightFld.val()});h._trigger(h.events.apply,i,{image:h._image});h.hide()}}).end().find("#"+this._id("_btnCancel")).igButton({click:function(i){h._trigger(h.events.cancel,i);h.hide()}}).end();h._aspectRatio()},_aspectRatio:function(){var h=this.poContent.find("#"+this._id("_imgAspectRatio")),i=this.options;h.igButton({height:13,width:18,icons:{primary:"ui-igbutton-unlink"},css:{buttonPrimaryIconClass:"ui-icon"},click:function(j,n){var m=a(this),k="ui-igbutton-link",l=true;if(m.data("preserveAspRatio")){k="ui-igbutton-unlink";l=false}m.igButton("option","icons",{primary:k}).data("preserveAspRatio",l)}});if(this._imgSrcFld.val()){if(i.image.width()!==0&&i.image.height()!==0){this._imgWidthFld.igNumericEditor("value",i.image.width()).bind("ignumericeditorspin",function(j,k){if(h.data("preserveAspRatio")){this._imgHeightFld.val(Math.round((i.image.height()/i.image.width())*k.value+k.delta))}});this._imgHeightFld.igNumericEditor("value",i.image.height()).bind("ignumericeditorspin",function(j,k){this._imgWidthFld.val(Math.round((i.image.width()/i.image.height())*k.value+k.delta))})}}else{this._imgWidthFld.igNumericEditor("value",0);this._imgHeightFld.igNumericEditor("value",0)}},_dataBind:function(h){this._imgSrcFld.val(h.attr("src"));this._imgAltFld.val(h.attr("alt"));if(h.width()===0||h.height()===0){return}this._imgWidthFld.igNumericEditor("value",h.width());this._imgHeightFld.igNumericEditor("value",h.height());this.poContent.find(":hidden").show()}});var e,g=0,f=0,c={document:document,rows:0,columns:0,addSpacingChar:false},d="",b={init:function(h){return this.each(function(){a.extend(c,h);if(this.nodeName.toLowerCase()!=="table"){return}if(c.addSpacingChar){d="&nbsp;"}e=a(this);if(c.rows&&c.rows>0){g=c.rows}else{g=e.find("tr").length}if(c.columns&&c.columns>0){f=c.columns}else{if(e.find("tr")[0]){f=e.find("tr")[0].cells.length}}if(!e.children().length){b.create()}})},create:function(){var l,h,k;e.empty();for(h=0;h<g;h++){l=a("<tr></tr>",c.document).appendTo(e);for(k=0;k<f;k++){a("<td>"+d+"</td>",c.document).appendTo(l)}}},addRow:function(k){var i=a("<tr></tr>",c.document),h;if(k){i.insertAfter(e.find("tr").eq(k))}else{i.appendTo(e)}for(h=0;h<f;h++){a("<td>"+d+"</td>",c.document).appendTo(i)}g++;return i},removeRow:function(h){var j=e.find("tr"),i;if(h){i=j.eq(h).remove()}else{i=j.last().remove()}g--;return i},addColumn:function(i){var h=[];e.find("tbody tr").each(function(l,k){var n=a(k),j=n.find("td"),m=a("<td>"+d+"</td>",c.document);if(i&&j.length){h.push(m.insertAfter(j.eq(i))[0]);return true}h.push(m.appendTo(n)[0])});f++;return a([]).pushStack(h)},removeColumn:function(h){var i=[];e.find("tr").each(function(k,j){var l=a(j);if(h){i.push(l.find("td").eq(h).remove());return true}i.push(l.find("td:last").remove())});f--;return a([]).pushStack(i)},getRowsNum:function(){return g},getColumnsNum:function(){return f}};a.fn.tableManipulator=function(h){if(b[h]){if(this!==e[0]){e=a(this)}return b[h].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof h==="object"||!h){return b.init.apply(this,arguments)}a.error("Method "+h+" does not exist on jQuery.tableManipulator")};a.ig.SelectionWrapper=a.ig.SelectionWrapper||Class.extend({_selection:null,_range:null,_isIeOld:false,_document:null,_commands:{insertunorderedlist:{name:"_insertList",browser:null,args:["insertunorderedlist"]},insertorderedlist:{name:"_insertList",browser:null,args:["insertorderedlist"]},increasefontsize:{name:"increaseFontSize",browser:"msie",args:[]},decreasefontsize:{name:"decreaseFontSize",browser:"msie",atgs:[true]}},NODE:new a.ig.XmlNodeType(),init:function(j,h){var i=this;this._window=j;this._document=this._window.document;if(!this._document.getSelection){this._isIeOld=true}if(this._isIeOld){this._selection=this._document.selection;this._range=this._document.selection.createRange()}else{this._selection=this._window.getSelection();this._window.setTimeout(function(){i._range=(i._getSelection().rangeCount===0)?i._document.createRange():i._selection.getRangeAt(0);if(a.isFunction(h)){h.call(i)}},50)}},_getSelection:function(){return this._selection},_getRange:function(){return this._range},surroundContents:function(i){var h=this._getRange();if(this._isIeOld){h.pasteHTML(i.html(h.text).get(0).outerHTML)}else{this._surroundContents(a(h.commonAncestorContainer),a(h.startContainer),a(h.endContainer),i)}return i},getSelectedItem:function(){var h=this._getRange(),i=a(h.commonAncestorContainer);if(!this._isIeOld){if(h.collapsed&&(h.endContainer.nodeType===this.NODE._Text)){if(i.parent().is("img")||i.parent().is("td")){return i.parent()}return a(h.startContainer)}if(h.collapsed){return a(h.commonAncestorContainer)}if(h.collapsed&&(h.endContainer.nodeType===this.NODE._Element)){return a(h.commonAncestorContainer.childNodes[h.endOffset-h.startOffset])}return a(h.commonAncestorContainer)}return a(h.parentElement())},getSelectionAsText:function(){if(this._getRange().text!==undefined){return this._getRange().text}return this._getRange().toString()},select:function(h){var j=h||this.getSelectedItem(),i;if(!this._isIeOld){this._range.selectNodeContents(j[0])}else{i=this._document.body.createTextRange();if(j.length===1){i.moveToElementText(j[0])}i.select()}},insertElement:function(h){if(!this._isIeOld){this._getRange().insertNode(h.get(0))}else{this._getRange().pasteHTML(h.get(0).outerHTML)}},applyStyle:function(){},execCommand:function(m,h){var o=this._getRange(),j=this._commands[m]?this[this._commands[m].name]:null,k=this._commands[m]?this._commands[m].args:null,i=this._commands[m]?this._commands[m].browser:null,q,l,n;if(this._isIeOld){o.select();o.execCommand(m,false,h)}else{n=a("<p><br></p>",this._document);if(this._selection.isCollapsed&&o.collapsed){if(a(o.startContainer).is("body")){q=a(o.startContainer).find(":first");o.selectNodeContents(q[0])}else{if(o.startContainer.nodeType===this.NODE._Document){q=a(o.startContainer.body).find(":first");o.selectNodeContents(q[0])}else{if(o.startContainer.nodeType===this.NODE._Text){this._updateSelection(o);this._document.execCommand(m,false,h);return}else{q=a(o.startContainer);o.selectNodeContents(q[0])}}}if(q.is("br")&&l.is("br")){q.replaceWith(n);o.selectNodeContents(n[0]);this._updateSelection(o)}}if((a.browser.msie&&a.browser.version==="9.0")||a.browser.opera){this._updateSelection(o)}if(a.isFunction(j)&&i===null){j.call(this,m,h)}else{if(a.isFunction(j)&&a.browser.hasOwnProperty(i)){j.apply(this,k)}else{this._document.execCommand(m,false,h)}}}},_insertList:function(i,h){var j=a("<p></p>",this._document),k;this._document.execCommand(i,false,h);if(a(this._selection.anchorNode).is("body")){k=a(this._selection.anchorNode).children().eq(this._selection.anchorOffset).wrap(j[0]).parent();this._range.selectNodeContents(k[0]);this._updateSelection(this._range)}},increaseFontSize:function(q){var i,m=this._range.startContainer,j=this._range.endContainer,o=this._range.startOffset,l=this._range.endOffset,h=a("<big></big>",this._document),p=a("<small></small>",this._document),r=q?p:h,s=q?h[0].nodeName.toLowerCase():p[0].nodeName.toLowerCase(),n,k,t=function(u){var v=a(this);if(q&&a(m).parent().is(s)){v.unwrap();return true}v.wrapInner(r)};if(m===j&&m.nodeType===this.NODE._Text){if(a(m).parent().is(s)){this._range.selectNodeContents(a(m).unwrap()[0]);this._updateSelection(this._range);return}i=this._wrapPartialString(m.data,o,l,r);a(m).replaceWith(i);this._range.selectNodeContents(r.contents(":first")[0]);this._updateSelection(this._range);return}if(m.nodeType===this.NODE._Text&&j.nodeType===this.NODE._Text){n=this._getLastParentUntil(a(m),a(this._range.commonAncestorContainer));k=this._getLastParentUntil(a(j),a(this._range.commonAncestorContainer));a(m).wrap(r);while(n.next()[0]!==k[0]){n=n.next().wrapInner(t)}a(j).wrap(r);return}if(o===l&&m.nodeType===this.NODE._Text){i=this._wrapPartialString(m.data,0,m.data.length,h);a(m).replaceWith(i);this._range.selectNodeContents(i.filter(h)[0]);this._updateSelection(this._range)}},decreaseFontSize:function(){this.increaseFontSize(true)},_wrapPartialString:function(k,j,h,l){var i=[];i.push(this._document.createTextNode(k.slice(0,j)));i.push(l.text(k.substring(j,h))[0]);i.push(this._document.createTextNode(k.slice(h)));return a(i)},_updateSelection:function(h){this._selection.removeAllRanges();this._selection.addRange(h)},_surroundContents:function(h,q,i,v,u){var p=this,t,k,n,m,r,j,o=this._getSelection(),l=this._getRange(),s;if(q[0]===i[0]){l.surroundContents(v.get(0));return v}t=l.startOffset;k=l.endOffset;n=this._document.createRange();n.setStart(q.get(0),t);n.setEnd(q.get(0),q.text().length);n.surroundContents(v.clone().get(0));o.addRange(n);r=this._getLastParentUntil(q,h);j=this._getLastParentUntil(i,h);s=r.siblings();r.siblings().each(function(x,w){if(r[0]===j[0]){return}var y=p._document.createRange();y.setStartBefore(w);y.setEndAfter(w);y.surroundContents(v.clone().get(0));o.addRange(y)});m=this._document.createRange();m.setStart(i.get(0),0);m.setEnd(i.get(0),k);m.surroundContents(v.clone().get(0));o.addRange(m)},_getLastParentUntil:function(h,i){while(h.parent().length){if(h.parent()[0]===i[0]){return h}h=h.parent()}},replaceNode:function(h){var i=this._getRange();if(i.startOffset!==i.endOffset){i.deleteContents()}i.insertNode(h[0])},insertTable:function(j){var i=this.getSelectedItem(),h=a("<br>",this._document);if(i[0].nodeType===this.NODE._Document){this._range.selectNodeContents(i.find("body > p:first")[0]);this._range.insertNode(j[0])}else{if(i.is("td")){i.parents("table").replaceWith(j)}else{if(i.is("table")){i.replaceWith(j)}else{if(i.is("br")){i.replaceWith(j)}else{this._range.insertNode(j[0])}}}}this._range.selectNodeContents(h.insertAfter(j)[0])},focus:function(){var h=a(this._document.body).find(":not(br):first");if(this._range.startContainer.nodeType===this.NODE._Text){this._document.body.focus();return}if(h.length===0){return}if(this._isIeOld){this._window.focus();return}this._range.setStart(h[0],0);this._range.setEnd(h[0],0);this._document.body.focus()}});a.extend(a.ui.HtmlEditor,{version:"12.1.20121.1010"});a.widget("ui.igSplitButton",{options:{items:[{name:"",label:"",icon:""}],defaultItemName:""},_isExpanded:false,events:{click:"click",expand:"expand",expanding:"expanding",collapse:"collapse",collapsing:"collapsing"},css:{arrow:"ui-splitbutton-arrow",splitButtonConrnersLeft:"ui-corner-left",splitButtonConrnersRight:"ui-corner-right"},_id:function(h){return this.element[0].id+h},widget:function(){return this.element},_create:function(){var i=this.options,h=this._getDefaultItem(i.defaultItemName),j=this;this.defaultButton=a('<div id="'+this._id("_"+i.defaultItemName)+'"></div>').appendTo(this.element).igToolbarButton({onlyIcons:true,labelText:"&nbsp;",title:h.label,icons:{primary:h.icon},name:i.defaultItemName}).addClass("ui-splitbutton-cleargaps").removeClass("ui-corner-all").addClass(this.css.splitButtonConrnersLeft);this.defaultButton.bind("igtoolbarbuttonclick",function(k){k.stopPropagation();j._trigger(j.events.click,k,{name:a(this).igToolbarButton("option").name})});this._expandButton=a("<div id='"+this._id("_arrow")+"' class='"+this.css.arrow+"'></div>").igToolbarButton({onlyIcons:true,labelText:"&nbsp;",icons:{primary:"ui-icon-triangle-1-s"}}).addClass("ui-splitbutton-cleargaps").removeClass("ui-corner-all").addClass(this.css.splitButtonConrnersRight).appendTo(this.element);this._createSplitButtonItemsList();this._focusEl=a('<input type="button" class="ui-splitbutton-hidden-input">').appendTo(this.element)},_hideButtonsList:function(h,i){var j=this._expandButton.igToolbarButton("option","isSelected"),k=h.is(":visible"),l=this;if(k&&j){h.effect("blind",{direction:"vertical"},250,function(){l._expandButton.igToolbarButton("toggle");l._trigger(l.events.collapse,i)})}},_init:function(){this.element.addClass("ui-splitbutton ui-widget");this.element.attr("tabIndex",0);this._attachEvents()},_attachEvents:function(){var h=this;this._expandButton.bind("igtoolbarbuttonclick",a.proxy(this._onShowHidePopover,this));this._focusEl.blur(a.proxy(this._onShowHidePopover,this));this._focusEl.blur(a.proxy(this._onSplitButtonBlur,this));this.element.bind(h.widgetEventPrefix.toLowerCase()+"expanding",a.proxy(this._onExpand,this));this.element.bind(h.widgetEventPrefix.toLowerCase()+"collapsing",a.proxy(this._onCollapse,this));this._splitButtonItemsList.delegate("a","igtoolbarbuttonclick",a.proxy(this._onItemsListClick,this));this.element.bind("focus",a.proxy(this._onSplitButtonFocus,this));this.element.bind("blur",a.proxy(this._onSplitButtonBlur,this));this.element.bind("keypress",a.proxy(this._onEnterKeypress,this))},_onExpand:function(h){var i=this;this._splitButtonItemsList.effect("blind",{direction:"vertical",mode:"show"},250,function(){i._isExpanded=true;i._trigger(i.events.expand,h);a(this).dequeue()});this._focusEl.focus()},_onCollapse:function(h){var i=this;this._splitButtonItemsList.effect("blind",{direction:"vertical",mode:"hide"},250,function(){i._isExpanded=false;i._trigger(i.events.collapse,h);a(this).dequeue()})},_onShowHidePopover:function(h){var i=this;h.stopPropagation();if(h.type==="blur"){this._shouldClose=true;setTimeout(function(){i._isExpanded=false;i._shouldClose=false;i._trigger("collapsing",h)},150)}if(h.type==="igtoolbarbuttonclick"){if(!this._shouldClose){this._isExpanded=true;this._trigger("expanding",h)}}},_onItemsListClick:function(h,j){var i=a(h.currentTarget).igToolbarButton("option","name");this.switchToButton(a(h.currentTarget));h.stopImmediatePropagation();if(j&&j.onlySwithButtons){this.defaultButton.igToolbarButton("toggle")}else{this._trigger(this.events.click,h,{name:i})}},_onSplitButtonFocus:function(h){this.element.unbind("focus");this._expandButton.focus();this.defaultButton.focus();this.element.bind("focus")},_onSplitButtonBlur:function(h){this.element.unbind("blur");this._expandButton.removeClass("ui-state-focus");this.defaultButton.removeClass("ui-state-focus");this.element.bind("blur")},_onEnterKeypress:function(h){if(h.which===13){this._expandButton.trigger("igtoolbarbuttonclick")}},_getDefaultItem:function(j){var k=this.options,h;for(h=0;h<k.items.length;h++){if(k.items[h].name===j){return k.items[h]}}},_createSplitButtonItemsList:function(){var j=a("<ul class='ui-splitbutton-list ui-menu ui-widget ui-widget-content ui-corner-all'></ul>"),k=this.options,h,l;for(h=0;h<k.items.length;h++){if(k.items[h].name===k.defaultItemName){continue}l=a('<a id="'+this._id("_"+k.items[h].name)+'" class="ui-corner-all" tabindex="-1"></a>').igToolbarButton({onlyIcons:true,labelText:"",title:k.items[h].label,icons:{primary:k.items[h].icon},name:k.items[h].name}).addClass("ui-splitbutton-cleargaps");a('<li class="ui-menu-item" role="menuitem"></li>').appendTo(j).append(l)}this._splitButtonItemsList=j.appendTo(this.element)},switchToButton:function(h){var m=(typeof h==="string")?a("#"+this._id("_"+h)):h,j=this.defaultButton.igToolbarButton("option"),i=this.defaultButton.attr("id"),l=m.igToolbarButton("option"),k=m.attr("id");delete j.click;m.igToolbarButton("option",j).attr("id",i);this.defaultButton.igToolbarButton("option",l);this.defaultButton.attr("id",k);this.defaultButton.igToolbarButton("toggle")},collapse:function(){if(!this._isExpanded){return}this._expandButton.trigger("igtoolbarbuttonclick")},expand:function(){if(this._isExpanded){return}this._expandButton.trigger("igtoolbarbuttonclick")},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);this.element.unbind();this._splitButtonItemsList.undelegate();this.element.find(":ui-igToolbarButton").igToolbarButton("destroy").end().removeClass("ui-splitbutton ui-widget").empty();delete this._expandButton;delete this._focusEl;delete this._splitButtonItemsList}});a.widget("ui.igColorPickerSplitButton",a.ui.igSplitButton,{options:{items:[],defaultColor:"#000"},_create:function(){a.ui.igSplitButton.prototype._create.call(this)},_init:function(){this.element.addClass("ui-splitbutton ui-widget");this._setButtonColorIndicator(this.options.defaultColor);this._attachEvents()},_createSplitButtonItemsList:function(){var h;this._popover=a('<div id="'+this._id("_popover")+'"></div>').appendTo(this.element).igPopover({renderCloseButton:false,direction:"bottom",closeOnBlur:false,width:220,defaultMaxWidth:null});h=this._popover.igPopover("container");this._splitButtonItemsList=h.igColorPicker()},_attachEvents:function(){a.ui.igSplitButton.prototype._attachEvents.call(this);this._splitButtonItemsList.bind("igcolorpickercolorselected",a.proxy(this._onColorSelect,this));this.defaultButton.bind("igtoolbarbuttonclick",a.proxy(this._onDefaultButtonClick,this));this.element.bind(this.widgetEventPrefix.toLowerCase()+"expanding",a.proxy(this._onExpand,this));this.element.bind(this.widgetEventPrefix.toLowerCase()+"collapsing",a.proxy(this._onCollapse,this))},_onExpand:function(h){this._popover.igPopover("show",this.element);this._focusEl.focus()},_onCollapse:function(h){this._popover.igPopover("hide")},_onItemsListClick:function(h){return false},_onColorSelect:function(h,i){this._expandButton.igToolbarButton("toggle");this._setButtonColorIndicator(i.color);this.options.defaultColor=i.color;this._trigger("colorSelected",h,{value:i.color})},_onDefaultButtonClick:function(h,i){h.stopPropagation();this._trigger("colorSelected",h,{value:this.options.defaultColor})},_setButtonColorIndicator:function(h){this.defaultButton.children(":first").css("border-bottom-color",h)},destroy:function(){a.ui.igSplitButton.prototype.destroy.apply(this,arguments)}});a.widget("ui.igColorPicker",{options:{colors:[["#ffffff","#000000","#EEECE1","#1F497D","#4F81BD","#C0504D","#9BBB59","#8064A2","#4BACC6","#F79646"],["#F2F2F2","#7F7F7F","#DDD9C3","#C6D9F0","#DBE5F1","#F2DCDB","#EBF1DD","#E5E0EC","#DBEEF3","#FDEADA"],["#D8D8D8","#595959","#C4BD97","#8DB3E2","#B8CCE4","#E5B9B7","#D7E3BC","#CCC1D9","#B7DDE8","#FAC08F"],["#BFBFBF","#3F3F3F","#938953","#548DD4","#95B3D7","#D99694","#C3D69B","#B2A1C7","#92CDDC","#FAC08F"],["#A5A5A5","#262626","#494429","#17365D","#366092","#953734","#76923C","#5F497A","#31859B","#E36C09"],["7F7F7F#","#0C0C0C","#1D1B10","#0F243E","#244061","#632423","#4F6128","#3F3151","#205867","#974806"]],standartColors:["#C00000","#FF0000","#FFC000","#FFFF00","#92D050","#00B050","#00B0F0","#0070C0","#002060","#7030A0"]},events:{colorSelected:"colorSelected"},css:{sntandartColorsRow:"ui-colorpicker-standardcolors"},_create:function(){var p=this.options,l,r,k=a('<ul class="color-table"></ul>'),q,h,m,n;p.colors.push(p.standartColors);r=p.colors.length;for(m=0;m<r;m++){q=a("<li><ul></ul></li>").appendTo(k).children();l=p.colors[m].length;if(m===(r-1)){q.addClass("ui-colorpicker-standardcolors")}for(n=0;n<l;n++){h=a('<a href="#"><span class="color" style="background-color: '+p.colors[m][n]+';"></span></a>');h.children().data("color",p.colors[m][n]);a('<li class="color-item"></li>').appendTo(q).append(h)}}this._colorTable=k.appendTo(this.element)},_init:function(){var h=this;this.element.addClass(this.widgetBaseClass);this._colorTable.children().first().addClass("color-table-first-row");this._colorTable.delegate("a","click",function(i){var j=a(i.target);i.preventDefault();h._colorTable.find("span.selected-color").removeClass("selected-color");if(j.is("a")){j=j.children()}j.addClass("selected-color");h._trigger(h.events.colorSelected,i,{color:j.data("color")})})}})}(jQuery));$.ig.ToolbarHelper=$.ig.ToolbarHelper||Class.extend({_toolbarsItemsLocation:{textToolbar:{name:"textToolbar",bold:{name:"bold"},italic:{name:"Italic"},underline:{name:"Underline"},strikethrough:{name:"Strikethrough"},increasefontsize:{name:"increasefontsize"},decreasefontsize:{name:"decreasefontsize"},fontFamily:{name:"fontFamily"},fontSize:{name:"fontSize"},formatsList:{name:"formatsList"}},formattingToolbar:{name:"formattingToolbar",justifyleft:{name:"justifyleft"},justifycenter:{name:"justifycenter"},justifyright:{name:"justifyright"},justifyfull:{name:"justifyfull"},bullets:{name:"bullets"},indents:{name:"indents"},textColor:{name:"textColor"},backgroundTextColor:{name:"backgroundTextColor"}},insertObjectToolbar:{name:"insertObjectToolbar",image:{name:"image"},link:{name:"link"},table:{name:"table"},addRow:{name:"addRow"},addColumn:{name:"addColumn"},removeRow:{name:"removeRow"},removeColumn:{name:"removeColumn"}},copyPasteToolbar:{name:"copyPasteToolbar",copy:{name:"copy"},cut:{name:"cut"},paste:{name:"paste"},undo:{name:"undo"},redo:{name:"redo"}}},init:function(c,b){this._toolbars={};this._w=c;this._d=c.document;var a=this;b.each(function(e,d){var f=$(d).igToolbar("option","name");a._toolbars[f]=$(d)});this._initAlignButtons(b);this._disableUnsupportedItems();this._disableTableControls(true)},_initAlignButtons:function(c){var b=this._toolbars.formattingToolbar,a={justifyleft:b.igToolbar("getItem","justifyleft"),justifycenter:b.igToolbar("getItem","justifycenter"),justifyright:b.igToolbar("getItem","justifyright"),justifyfull:b.igToolbar("getItem","justifyfull")};c.bind("igtoolbartoolbarbuttonclick",function(d,f){if(a.hasOwnProperty(f.name)){$.each(a,function(g,e){if(g!==f.name&&e.igToolbarButton("option","isSelected")){e.igToolbarButton("toggle");return}})}})},_disableUnsupportedItems:function(){var a=this._toolbars.copyPasteToolbar;if(!$.browser.msie){a.igToolbar("disableItem","cut",true);a.igToolbar("disableItem","copy",true);a.igToolbar("disableItem","paste",true)}},_disableTableControls:function(b){var a=this._toolbars.insertObjectToolbar;if(!b&&this._isTableControlsDisabled){a.igToolbar("disableItem","addColumn",false);a.igToolbar("disableItem","removeColumn",false);a.igToolbar("disableItem","addRow",false);a.igToolbar("disableItem","removeRow",false);this._isTableControlsDisabled=false}else{if(b&&!this._isTableControlsDisabled){a.igToolbar("disableItem","addColumn",true);a.igToolbar("disableItem","removeColumn",true);a.igToolbar("disableItem","addRow",true);a.igToolbar("disableItem","removeRow",true);this._isTableControlsDisabled=true}}},_callbackMap:{_isBold:"_onBold",_isItalic:"_onItalic",_isUnderlined:"_onUnderlined",_isLineThrough:"_onLineThrough",_isJustifyCenter:"_onAlign",_isJustifyFull:"_onAlign",_isJustifyLeft:"_onAlign",_isJustifyRight:"_onAlign",_isOrderedList:"_onList",_isUnorderedList:"_onList",_hasFontName:"_onFontName",_hasFontSize:"_onFontSize",_isTable:"_onTable"},analyse:function(a){var b=this;this._resetToolbars();if(a[0].nodeType===9){this._computedStyles=(this._w.getComputedStyle&&this._w.getComputedStyle(this._d.body))||this._d.body.currentStyle}else{this._computedStyles=(this._w.getComputedStyle&&this._w.getComputedStyle(a[0]))||a[0].currentStyle}$.each(this._callbackMap,function(d,c){var e=b[d](a);if($.isFunction(b[d])&&e&&$.isFunction(b[c])){b[c](a,e)}});if(!a.is("table")&&!a.is("td")){this._disableTableControls(true)}},_isBold:function(){return this._d.queryCommandState("bold")||this._computedStyles.fontWeight>=700},_isItalic:function(){return this._d.queryCommandState("italic")||this._computedStyles.fontStyle.toLowerCase()==="italic"},_isUnderlined:function(){return this._d.queryCommandState("underline")||(this._computedStyles.textDecoration.toLowerCase().indexOf("underline")!==-1)},_isLineThrough:function(){return this._d.queryCommandState("strikethrough")||(this._computedStyles.textDecoration.toLowerCase().indexOf("line-through")!==-1)},_isJustifyCenter:function(){if(this._d.queryCommandState("justifycenter")){return"justifycenter"}},_isJustifyFull:function(){if(this._d.queryCommandState("justifyfull")){return"justifyfull"}},_isJustifyLeft:function(){if(this._d.queryCommandState("justifyleft")){return"justifyleft"}},_isJustifyRight:function(){if(this._d.queryCommandState("justifyright")){return"justifyright"}},_isOrderedList:function(){if(this._d.queryCommandState("insertorderedlist")){return"InsertOrderedList"}},_isUnorderedList:function(){if(this._d.queryCommandState("insertunorderedlist")){return"InsertUnorderedList"}},_isTable:function(a){if(a.is("table")||a.is("td")){return true}},_checkParents:function(a,b){while(a.parent()){if(a.parent().is(b)){return true}if(a.is("body")){return}a=a.parent()}},_hasFontName:function(){var a=this._getFontFamily();if(a==="serif"){a="Times New Roman"}return a},_getFontFamily:function(){return this._computedStyles.fontFamily},_hasFontSize:function(){return this._computedStyles.fontSize},_onBold:function(a){this._toolbars.textToolbar.igToolbar("getItem","Bold").igToolbarButton("toggle")},_onItalic:function(a){this._toolbars.textToolbar.igToolbar("getItem","Italic").igToolbarButton("toggle")},_onUnderlined:function(a){this._toolbars.textToolbar.igToolbar("getItem","Underline").igToolbarButton("toggle")},_onLineThrough:function(a){this._toolbars.textToolbar.igToolbar("getItem","Strikethrough").igToolbarButton("toggle")},_onAlign:function(b,a){this._toolbars.textToolbar.igToolbar("getItem",a).igToolbarButton("toggle")},_onList:function(a,b){this._toolbars.formattingToolbar.each(function(d,e){var c=$(e).igToolbar("getItem","bullets");if(c.data("igSplitButton")!==undefined){c.igSplitButton("switchToButton",b);return}})},_onFontName:function(b,c){var a=this._toolbars.textToolbar.igToolbar("getItem","fontFamily");this._setComboValue(a,$.ig.HtmlEditor.locale.fontNames[/^win/gi.test(navigator.platform)?"win":"mac"],c)},_onFontSize:function(b){var c=this._d.queryCommandValue("fontsize"),d=c?c.toString():"",a=this._toolbars.textToolbar.igToolbar("getItem","fontSize");this._setComboValue(a,$.ig.HtmlEditor.locale.fontSizes,d)},_onTable:function(){this._disableTableControls(false)},_setComboValue:function(a,h,f,g){var e,d=g||"text",b=h[a.igCombo("selectedIndex")][d],c;if(f===b){return}for(e=0;e<h.length;e++){c=h[e][d];if(f===c){a.igCombo("selectedIndex",e);break}}},_resetToolbars:function(){$.each(this._toolbars,function(b,a){$(a).igToolbar("deactivateAll")})}});