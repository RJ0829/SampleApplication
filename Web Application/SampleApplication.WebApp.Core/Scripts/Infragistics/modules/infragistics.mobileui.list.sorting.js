/*
 * Infragistics.Web.MobileUI ListView Sorting 12.1.20121.1010
 *
 * Copyright (c) 2011-2012 Infragistics Inc.
 *
 * http://www.infragistics.com/
 *
 * Depends on:
 *  jquery-1.6.4.js
 *	jquery.ui.core.js
 *  ig.mobileui.list.js
 *	ig.dataSource.js
 *  ig.ui.shared.js
 *	ig.util.js
 */
(function(a){a.widget("mobile.igListViewSorting",a.mobile.widget,{css:{sortPresets:"ui-iglist-sort-presets",preset:"ui-btn-inline ui-iglist-preset",presetSelected:"ui-iglist-preset-selected",presetHidden:"ui-iglist-preset-hidden",listDivider:"ui-li ui-li-divider ui-btn ui-bar-{0} ui-li-has-count",count:"ui-li-count ui-btn-up-{0} ui-btn-corner-all",presetFooterText:"ui-iglist-tray-footer-item ig-tray-sort-preset",separatorFooterText:"ui-iglist-tray-footer-sep",insetDivider:"ui-corner-all",insetTopItem:"ui-corner-top",insetBottomItem:"ui-corner-bottom"},options:{type:null,caseSensitive:false,sortPresetsLabel:null,sortState:"default",sortUrlKey:null,sortUrlKeyAscValue:null,sortUrlKeyDescValue:null,customSortFunction:null,sortedFields:[{fieldName:"",direction:""}],showGrouping:false,groupComparerFunction:null,groupNameFunction:null,presets:[{text:"",sortedFields:[{fieldName:"",direction:""}],showGrouping:false,groupComparerFunction:null,groupNameFunction:null}],dividerTemplate:null,listDividerTheme:"b",countTheme:"c",presetTheme:"c",autoGenerateSortPresets:true},events:{presetChanging:"presetChanging",presetChanged:"presetChanged"},_createWidget:function(){this.options.sortedFields=[];this.options.presets=null;a.Widget.prototype._createWidget.apply(this,arguments)},_create:function(){var f=this,c=this.css,e=this.options,d;this._presetTapHandler=function(k){var q=f.list._itemFromTarget(k.target,"li","idx"),p,h,l,m,g,j,i,n,o;if(q&&!q.hasAttribute("sorted")){h=a(q);p=h.attr("idx");d=f._trigger(f.events.presetChanging,null,{state:p,owner:f});if(d){l=h.offset().left;m=h.outerWidth();g=h.parent().parent();j=g.outerWidth();i=g.scrollLeft();h.attr("sorted",1).addClass(f.css.presetSelected).siblings().attr("sorted",null).removeClass(f.css.presetSelected);f.options.sortState=p;if(l+m>j){n=i+m;g.animate({scrollLeft:n},function(){f._refreshPresets(g)})}else{if(l<0){n=i-m;g.animate({scrollLeft:n},function(){f._refreshPresets(g)})}}o=f.options.presets[f.options.sortState];f._adjustTrayText(o);a.mobile.showPageLoadingMsg();f._shouldFirePresetChanged=true;f._resort()}}};c.count=c.count.replace("{0}",e.countTheme);c.listDivider=c.listDivider.replace("{0}",e.listDividerTheme);c.preset=c.preset.replace("{0}",e.presetTheme)},_adjustTrayText:function(c){var e,d;if(this._presetSpan){if(c){e=this._presetSpan.text()==="";this._presetSpan.text(c.text).prev().show();if(e){a(this._presetSpan.prevAll('[data-trayRole="keyword"]').get().reverse()).each(function(f){if(f>0&&a(this).text()&&d){a(this).prev().prev().show();d=false}if(!d){d=a(this).text().length>0}});if(d){this._presetSpan.prev().prev().show()}this._presetSpan.nextAll('[data-trayRole="empty"]').hide().next().hide()}}else{this._presetSpan.text("").prev().hide().prev().hide();a(this._presetSpan.prevAll('[data-trayRole="keyword"]').get().reverse()).each(function(f){if(f>0&&!a(this).text()&&d){a(this).prev().prev().hide();d=false}if(!d){d=a(this).text().length>0}});if(!this._presetSpan.prevAll('[data-trayRole="keyword"]').text()){this._presetSpan.nextAll('[data-trayRole="empty"]').show().next().show()}}}},_setOption:function(c,d){a.Widget.prototype._setOption.apply(this,arguments);if(c==="type"){throw new Error(this.list._locale("optionChangeNotSupported")+" "+c)}else{if(c==="caseSensitive"){this.list.dataSource.settings.sorting.caseSensitive=this.options.caseSensitive}else{if(c==="sortState"){this.options.sortState=d;this.list.container().find("."+this.css.sortPresets).find('[idx="'+d+'"]').attr("sorted",1).addClass(this.css.presetSelected).siblings().attr("sorted",null).removeClass(this.css.presetSelected);this._adjustTrayText(this.options.presets[this.options.sortState]);this._resort()}}}},_locale:function(c){var d=this.options[c];if(d===undefined||d===null){d=a.ig.mobileListViewSorting&&a.ig.mobileListViewSorting.locale?a.ig.mobileListViewSorting.locale[c]:null}return d||""},group:function(d,c,g,e,f){if(d&&d.length>0){this._shouldGroup=true;this._grpFx=e;this._nameFx=f;this._grpField=d[0].fieldName}this.sort(d,c,g)},sort:function(d,c,g){var h,e=0,f=[];for(h=0;d&&h<d.length;++h){f[e]={fieldName:d[h].fieldName,dir:d[h].direction};if(f[e].dir===undefined||f[e].dir===null){if(c!==null&&c!==undefined){f[e].dir=c}else{f[e].dir="asc"}}e++}this.options.sortState="custom";if(this.options.presets&&this.options.presets.length>0){this.list.container().find("."+this.css.sortPresets).find("."+this.css.presetSelected).removeClass(this.css.presetSelected).attr("sorted",null);this._adjustTrayText(g?{text:g}:null)}this._resort(true,f)},_resort:function(e,f){var h,g=this.options.sortState,d=0,c;if(e===undefined){e=true}if(f===undefined){f=[]}if(g!==null&&g!==""){if(g==="default"){g=this.options.sortedFields}else{if(g!=="custom"){d=parseInt(g,10);g=this.options.presets[d].sortedFields}}if(a.type(g)==="array"){d=0;for(h=0;h<g.length;++h){f[d]={fieldName:g[h].fieldName,dir:g[h].direction};if(f[d].dir===undefined||f[d].dir===null){f[d].dir="asc"}d++}}}this.list.dataSource.settings.paging.appendPage=false;this.list.dataSource.settings.paging.pageIndex=0;this.list._requireRecordsClear=true;c={sortedFields:f};this._trigger("_sortChanging",null,c);if(this.list.options.bindings.isDividerKey&&!c.handled){this._filterOutDividers(f)}this.list.dataSource.settings.sorting.expressions=f;if(this.options.type==="local"){if(f.length>0){this.list.dataSource.sort(f,"asc")}else{this.list.dataSource.clearLocalSorting()}if(e){this.list._renderData()}this.list.dataSource.settings.paging.appendPage=true}else{if(e){this.list.dataSource.dataBind()}}},_filterOutDividers:function(d){var c=[];if(d.length>0){c[0]={fieldName:this.list.options.bindings.isDividerKey,cond:"false",logic:"And"}}this.list.dataSource.settings.filtering.expressions=c;if(this.options.type==="local"){if(c.length>0){this.list.dataSource.filter(c,"AND")}else{this.list.dataSource.clearLocalFilter()}}},_cmp:function(c,d,e){if(c){if(typeof(c)==="function"){return c(d,e)}return window[c](d,e)}return d===e},_groupName:function(c,d){if(c){if(typeof(c)==="function"){return c(d)}return window[c](d)}return d},_getPresetByFirstFieldName:function(c){var d;if(this.options.presets){for(d=0;d<this.options.presets.length;++d){if(this.options.presets[d].sortedFields&&this.options.presets[d].sortedFields.length>0&&this.options.presets[d].sortedFields[0].fieldName===c){return this.options.presets[d]}}}return null},_renderingTray:function(c,m){var k=this,n,o,h=0,g,f,d,i,l=[];if(c.target.id!==this.list.element[0].id){return}if(this.options.autoGenerateSortPresets){if(this.options.presets===undefined||this.options.presets===null){this.options.presets=[]}f=this.list.dataSource.schema()?this.list.dataSource.schema().fields():null;g=parseInt(this.options.sortState,10);for(o=0;f&&o<f.length;++o,++h){d=f[o].name;if(d&&!this._getPresetByFirstFieldName(d)){this.options.presets.push({text:d,sortedFields:[{fieldName:d}]});if(h===g){i=this.options.presets[h].sortedFields}}}if((!this.list.dataSource.settings.sorting.defaultFields||!this.list.dataSource.settings.sorting.defaultFields.length)&&i&&i.length>0){for(o=0;o<i.length;++o){l[l.length]={fieldName:i[o].fieldName,dir:i[o].direction};if(l[o].dir===undefined||l[o].dir===null){l[o].dir="asc"}}this.list.dataSource.settings.sorting.defaultFields=l;this.list.dataSource.settings.sorting.expressions=l;if(this.list.options.bindings&&this.list.options.bindings.isDividerKey){if(l&&l.length>0){this._needToFilterDividers=l}}}}if(this.options.autoGenerateSortPresets||(this.options.presets&&this.options.presets.length>0)){m.needTray=2;if(m.css.indexOf("one")>-1){m.css=m.css.replace("one","two")}else{m.css=m.css+"-one"}n=a("<div />").addClass(this.css.sortPresets).append("<span>"+this._locale("sortPresetsLabel")+"</span>").append("<div><ul></ul></div>").find("ul").bind("click",this._presetTapHandler);n.append("<li class='"+this.css.preset+"' idx='default'>"+this._locale("sortDefaultStateText")+"</li>");for(o=0;this.options.presets&&o<this.options.presets.length;++o){n.append(a("<li class='"+this.css.preset+"' idx='"+o+"'>"+this.options.presets[o].text+"</li>"))}g=parseInt(this.options.sortState,10)+1;if(isNaN(g)){g=0}n.children().eq(g).addClass(this.css.presetSelected);if(!m.tray){m.tray=a("<div />")}n.children().eq(g).addClass(this.css.presetSelected);n=n.parent().bind({scroll:function(e){k._refreshPresets()}});if(n.scrollview){n.scrollview()}else{if(n.igScroll){n.igScroll({cancelStart:true})}}n.parent().appendTo(m.tray)}},_renderedTray:function(d){var e=this,c=a(window);if(this.options.presets&&this.options.presets.length>0){this._refreshPresets();c.bind("resize",function(){e._refreshPresets()});c.bind("orientationchange",function(){e._refreshPresets()})}},_refreshPresets:function(e){var f=this,c=a.mobile.activePage,d=this.list.element.closest(".ui-page");if(c&&c[0]===d[0]){if(!e){e=this.list.container().find("."+this.css.sortPresets)}a(e).find("li").removeClass(f.css.presetHidden).each(function(l,o){var g=a(o.parentNode.parentNode),h=a(o),m=h.offset().left,n=h.width(),k=g.outerWidth(),j=Math.min(0,g.offset().left);if(m+n>k+j||m<j){h.addClass(f.css.presetHidden)}})}},_renderingTrayFooterBar:function(c,d){if((this.options.presets&&this.options.presets.length>0)||this.options.autoGenerateSortPresets){d.trayFooter.append("<span style='display:none;' class='"+this.css.separatorFooterText+"' data-trayRole='bullet'> &bull; </span>").append("<span class='"+this.css.separatorFooterText+"' style='display:none;'> "+this._locale("sortByLabel")+" </span>").append(this._presetSpan=a("<span data-trayRole='keyword' class='"+this.css.presetFooterText+"'></span>"));if(this.options.sortState!=="default"&&this.options.sortState!=="custom"&&this.options.presets[this.options.sortState]){this._presetSpan.text(this.options.presets[this.options.sortState].text).prev().show();if(this._presetSpan.prevAll('[data-trayRole="keyword"]').text()){this._presetSpan.prev().prev().show()}}}},_itemsRendering:function(g,q){var p=this.options.sortState,m,o,c=this.css,k,l=q.index,f=q.dataView,n,d=c.listDivider,r,j,h,s;if(!this.list._initialized&&this.options.autoGenerateSortPresets&&(!this.options.presets||this.options.presets.length===0)){if(this.options.presets===undefined||this.options.presets===null){this.options.presets=[]}j=this.list.dataSource.schema()?this.list.dataSource.schema().fields():null;if(!j||j.length===0){j=this.list.options.schema.fields}for(s=0;j&&s<j.length;++s){h=j[s].name;if(h&&!this._getPresetByFirstFieldName(h)){this.options.presets.push({text:h,sortedFields:[{fieldName:h}]})}}r=this.list.container().find("."+this.css.sortPresets).find("ul");for(s=0;this.options.presets&&s<this.options.presets.length;++s){r.append(a("<li class='"+this.css.preset+"' idx='"+s+"'>"+this.options.presets[s].text+"</li>"))}m=parseInt(this.options.sortState,10);if(!isNaN(m)){this.list.dataSource.settings.paging.appendPage=false;this.list.dataSource._data=[];this.list.dataSource._dataView=[];this._setOption("sortState",m);return false}}if(this.list.options.inset&&c.insetDivider){d+=" "+c.insetDivider}if(l===0&&this.list.dataSource.settings.paging.enabled&&this.list.dataSource.settings.paging.pageIndex>0){l=this.list.dataSource.settings.paging.pageSize*this.list.dataSource.settings.paging.pageIndex-1}if(this._shouldGroup===undefined&&p!==null&&p!==""){if(p==="default"){if(this.options.showGrouping&&this.options.sortedFields.length>0){this._shouldGroup=true;this._nameFx=this.options.groupNameFunction;this._grpFx=this.options.groupComparerFunction;k=this._grpField=this.options.sortedFields[0].fieldName}else{this._shouldGroup=false}}else{if(p!=="custom"){m=parseInt(p,10);o=this.options.presets[m];if(o.showGrouping&&o.sortedFields.length>0){this._shouldGroup=true;this._nameFx=o.groupNameFunction;this._grpFx=o.groupComparerFunction;k=this._grpField=o.sortedFields[0].fieldName}else{this._shouldGroup=false}}}}else{k=this._grpField}if(this._lastGroupCount===undefined){this._lastGroupCount=0}if(this._shouldGroup&&f.length>0){if(q.listElement.html()!==""){this._lastGroup=q.listElement.find("."+d.split(" ")[1]).last();n=f[l];if(this._cmp(this._grpFx,n[k],f[l+1][k])){if(!this._lastGroupCount){this._lastGroupCount=parseInt(this._lastGroup.find(".ui-li-count").html(),10)}}else{this._lastGroup=null;this._lastGroupCount=0;if(this.options.dividerTemplate!==null&&this.options.dividerTemplate!==undefined&&this.options.dividerTemplate!==""){q.items+="<li class='"+d+"'>{TMPL}</li>"}else{q.items+="<li class='"+d+"'>"+this._groupName(this._nameFx,f[l][k])+"<span class='"+c.count+"'>{GCNT}</span></li>"}}}else{this._lastGroupCount=0;if(this.options.dividerTemplate!==null&&this.options.dividerTemplate!==undefined&&this.options.dividerTemplate!==""){q.items+="<li class='"+d+"'>{TMPL}</li>"}else{q.items+="<li class='"+d+"'>"+this._groupName(this._nameFx,f[l][k])+"<span class='"+c.count+"'>{GCNT}</span></li>"}}}},_itemRendered:function(g,k){var h=k.index,f=k.dataView,l=k.value,c=this.css,d=c.listDivider,j;if(this.list.options.inset&&c.insetDivider){d+=" "+c.insetDivider}if(this._shouldGroup){this._lastGroupCount++;if(h<f.length-1&&!this._cmp(this._grpFx,l[this._grpField],f[h+1][this._grpField])){if(this._lastGroup){if(this.options.dividerTemplate===null||this.options.dividerTemplate===undefined||this.options.dividerTemplate===""){this._lastGroup.find(".ui-li-count").html(this._lastGroupCount.toString())}else{this._lastGroup.html(a.ig.tmpl(this.options.dividerTemplate,{Count:this._lastGroupCount,LastValue:f[h],Name:this._groupName(this._nameFx,f[h][this._grpField])},{}))}this._lastGroup=null}else{if(this.options.dividerTemplate!==null&&this.options.dividerTemplate!==undefined&&this.options.dividerTemplate!==""){k.items=k.items.replace("{TMPL}",a.ig.tmpl(this.options.dividerTemplate,{Count:this._lastGroupCount,LastValue:f[h],Name:this._groupName(this._nameFx,f[h][this._grpField])},{}))}else{k.items=k.items.replace("{GCNT}",this._lastGroupCount)}}if(this.list.options.inset){j=c.insetBottomItem;if(this._lastGroupCount===1){j=c.insetTopItem+" "+c.insetBottomItem}k.items=k.items.replace("{EXTRACSS}","{EXTRACSS} "+j)}if(this.options.dividerTemplate!==null&&this.options.dividerTemplate!==undefined&&this.options.dividerTemplate!==""){k.items+="<li class='"+d+"'>{TMPL}</li>"}else{k.items+="<li class='"+d+"'>"+this._groupName(this._nameFx,f[h+1][this._grpField])+"<span class='"+c.count+"'>{GCNT}</span></li>"}this._lastGroupCount=0}else{if(h===f.length-1){if(this.options.dividerTemplate!==null&&this.options.dividerTemplate!==undefined&&this.options.dividerTemplate!==""){k.items=k.items.replace("{TMPL}",a.ig.tmpl(this.options.dividerTemplate,{Count:this._lastGroupCount,LastValue:f[h],Name:this._groupName(this._nameFx,f[h][this._grpField])},{}))}else{k.items=k.items.replace("{GCNT}",this._lastGroupCount)}if(this.list.options.inset){k.items=k.items.replace("{EXTRACSS}","{EXTRACSS} "+this.css.insetBottomItem)}}}if(this._lastGroupCount===1&&this.list.options.inset){k.items=k.items.replace("{EXTRACSS}","{EXTRACSS} "+this.css.insetTopItem)}}},_itemsRendered:function(d,g){var c=this.list.dataSource.dataView(),f=c.length-1;if(this._shouldGroup&&this._lastGroup){if(this.options.dividerTemplate===null||this.options.dividerTemplate===undefined||this.options.dividerTemplate===""){this._lastGroup.find(".ui-li-count").html(this._lastGroupCount.toString())}else{this._lastGroup.html(a.ig.tmpl(this.options.dividerTemplate,{Count:this._lastGroupCount,LastValue:c[f],Name:this._groupName(this._nameFx,c[f][this._grpField])},{}))}this._lastGroup=null;if(this.list.options.inset){if(this.css.insetTopItem.indexOf("ui-corner-top")>-1){this.list.listElement.children(".ui-corner-top").find(".ui-btn-inner").not(".ui-li-link-alt span:first-child").addClass("ui-corner-top").end().end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-tl")}if(this.css.insetBottomItem.indexOf("ui-corner-bottom")>-1){this.list.listElement.children(".ui-corner-bottom").find(".ui-btn-inner").not(".ui-li-link-alt span:first-child").addClass("ui-corner-bottom").end().end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-bl")}}}delete this._shouldGroup;delete this._nameFx;delete this._grpFx;delete this._grpField;if(this.options.dividerTemplate===""||!this.list._loadOnDemand){delete this._lastGroupCount}if(this._shouldFirePresetChanged){this._trigger(this.events.presetChanged,null,{state:this.options.sortState,owner:this});this._shouldFirePresetChanged=false}a.mobile.hidePageLoadingMsg()},_cancelButtonClicked:function(c,f){var d;if(this.options.sortState!=="default"){d=this._trigger(this.events.presetChanging,null,{state:"default",owner:this});if(d){a.mobile.showPageLoadingMsg();this._shouldFirePresetChanged=true;this._setOption("sortState","default");return false}}return true},_dataRendering:function(c,d){if(this.list._dataBinding&&this.options.type==="local"&&this._needToFilterDividers){this._filterOutDividers(this._needToFilterDividers);delete this._needToFilterDividers}},_createHandlers:function(){this._renderingTrayHandler=a.proxy(this._renderingTray,this);this._renderedTrayHandler=a.proxy(this._renderedTray,this);this._itemsRenderingHandler=a.proxy(this._itemsRendering,this);this._renderingTrayFooterBarHandler=a.proxy(this._renderingTrayFooterBar,this);this._itemRenderedHandler=a.proxy(this._itemRendered,this);this._itemsRenderedHandler=a.proxy(this._itemsRendered,this);this._cancelButtonClickedHandler=a.proxy(this._cancelButtonClicked,this);this._dataRenderingHandler=a.proxy(this._dataRendering,this)},_registerEvents:function(){this.list.element.bind("iglistrenderingtray",this._renderingTrayHandler);this.list.element.bind("iglistrenderedtray",this._renderedTrayHandler);this.list.element.bind("iglistitemsrendering",this._itemsRenderingHandler);this.list.element.bind("iglistrenderingtrayfooterbar",this._renderingTrayFooterBarHandler);this.list.element.bind("iglist_itemrendered",this._itemRenderedHandler);this.list.element.bind("iglistitemsrendered",this._itemsRenderedHandler);this.list.element.bind("iglistviewfiltering_cancelbuttonclicked",this._cancelButtonClickedHandler);this.list.element.bind("iglistdatarendering",this._dataRenderingHandler)},_unregisterEvents:function(){this.list.element.unbind("iglistrenderingtray",this._renderingTrayHandler);this.list.element.unbind("iglistrenderedtray",this._renderedTrayHandler);this.list.element.unbind("iglistrenderingtrayfooterbar",this._renderingTrayFooterBarHandler);this.list.element.unbind("iglistitemsrendering",this._itemsRenderingHandler);this.list.element.unbind("iglist_itemrendered",this._itemRenderedHandler);this.list.element.unbind("iglistitemsrendered",this._itemsRenderedHandler);this.list.element.unbind("iglistviewfiltering_cancelbuttonclicked",this._cancelButtonClickedHandler);this.list.element.unbind("iglistdatarendering",this._dataRenderingHandler);delete this._renderingTrayHandler;delete this._renderedTrayHandler;delete this._itemsRenderingHandler;delete this._renderingTrayFooterBarHandler;delete this._itemRenderedHandler;delete this._itemsRenderedHandler;delete this._cancelButtonClickedHandler;delete this._dataRenderingHandler},_injectList:function(d,c){var g,e,f=[];this.list=d;if(this.options.type===null){this.options.type=this.list._inferOpType()}if(this.options.type){this.list.dataSource.settings.sorting.type=this.options.type}else{this.list.dataSource.settings.sorting.type="remote"}this.list.dataSource.settings.sorting.enabled=true;this.list.dataSource.settings.sorting.caseSensitive=this.options.caseSensitive;this.list.dataSource.settings.sorting.defaultFields=this.list.dataSource.settings.sorting.expressions;this.list.dataSource.settings.sorting.sortUrlKey=this.options.sortUrlKey;this.list.dataSource.settings.sorting.sortUrlAscValueKey=this.options.sortUrlKeyAscValue;this.list.dataSource.settings.sorting.sortUrlDescValueKey=this.options.sortUrlKeyDescValue;if(a.type(this.options.customSortFunction)==="function"){this.list.dataSource.settings.sorting.customFunc=this.options.customSortFunction}e=this.options.sortedFields;if(this.options.sortState!=="default"&&this.options.presets&&this.options.presets[this.options.sortState]){e=this.options.presets[this.options.sortState].sortedFields}if(e&&e.length>0){for(g=0;g<e.length;++g){f[f.length]={fieldName:e[g].fieldName,dir:e[g].direction};if(f[g].dir===undefined||f[g].dir===null){f[g].dir="asc"}}this.list.dataSource.settings.sorting.defaultFields=f;this.list.dataSource.settings.sorting.expressions=f}if(this.list.options.bindings&&this.list.options.bindings.isDividerKey){this.list.dataSource._filter=true;if(f&&f.length>0){this._needToFilterDividers=f}}this._createHandlers();this._registerEvents()},destroy:function(){delete this._shouldGroup;delete this._nameFx;delete this._grpFx;delete this._grpField;delete this._lastGroupCount;if(this._presetSpan){this._presetSpan.prev().prev().remove().end().prev().remove().end().remove();delete this._presetSpan}this.list.container().find("."+this.css.sortPresets).remove();this._unregisterEvents();a.Widget.prototype.destroy.call(this);return this}});function b(d){return"-"+d.toLowerCase()}a(document).bind("_igListViewHtmlOptions",function(e,c){var d=c.element,h,f,g,i;if(d.jqmData("sorting")===true){if(!c.options.features){c.options.features=[]}h=c.options.features[c.options.features.length]={};h.name="Sorting";f=d.children(":jqmData(role='dividerTemplate')");if(f.length>0){h.dividerTemplate=unescape(f.first().html())}else{if(c.listElement){f=c.listElement.children(":jqmData(role='dividerTemplate')");if(f.length>0){h.dividerTemplate=unescape(f.first().html())}}}for(g in a.mobile.igListViewSorting.prototype.options){if(a.mobile.igListViewSorting.prototype.options.hasOwnProperty(g)){i=d.jqmData("sorting-"+g.replace(/[A-Z]/g,b));if(i!==undefined){h[g]=i}}}}});if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("ig.mobileui.list.sorting",["ig.mobileui.list"],function(){return a.mobile.igListViewSorting})}a.extend(a.mobile.igListViewSorting,{version:"12.1.20121.1010"})}(jQuery));